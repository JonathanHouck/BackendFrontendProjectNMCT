//Deze module aangepast naar eigen wens: https://www.npmjs.com/package/angular-scroll-animate
(function () {
    'use strict';

    angular.module('angular-scroll-animate', []).directive('whenVisible', ['$document', '$window',
        function($document, $window) {

            var determineWhereElementIsInViewport =
                function($el, viewportHeight, whenVisibleFn, delayPercent, scope) {

                    var elementBounds = $el[0].getBoundingClientRect();

                    //var panelTop = elementBounds.top;
                    var panelBottom = elementBounds.bottom;

                    // pixel buffer until deciding to show the element
                    var delayPx = delayPercent * elementBounds.height;

                    var bottomVisible = (panelBottom - delayPx > 0) && (panelBottom < viewportHeight);
                    //var topVisible = (panelTop + delayPx <= viewportHeight) && (panelTop > 0);

                    if ($el.data('hidden') && bottomVisible) {
                        whenVisibleFn($el, scope);
                        $el.data('hidden', false);
                    }

                    /*// scrolled out from scrolling down or up
                     else if (!($el.data('hidden')) && (panelBottom < 0 || panelTop > viewportHeight)) {
                     whenNotVisibleFn($el, scope);
                     $el.data('hidden', true);
                     }*/
                };

            return {
                restrict: 'A',
                scope: {
                    whenVisible: '&',
                    delayPercent: '=?'
                },

                controller: ['$scope', function(scope) {
                    if (!scope.whenVisible || !angular.isFunction(scope.whenVisible())) {
                        throw new Error('Directive: angular-scroll-animate \'when-visible\' attribute must specify a function.');
                    }

                    /*if (scope.whenNotVisible && !angular.isFunction(scope.whenNotVisible())) {
                     throw new Error('Directive: angular-scroll-animate \'when-not-visible\' attribute must specify a function.');
                     }*/

                    if (scope.delayPercent) {

                        var delayPercent = parseFloat(scope.delayPercent);

                        if ((Number.isNaN(delayPercent)) || (delayPercent < 0 || delayPercent > 1)) {
                            throw new Error('Directive: angular-scroll-animate \'delay-percent\' attribute must be a decimal fraction between 0 and 1.');
                        }
                    }
                }],

                link: function(scope, el, attributes) {

                    var delayPercent = attributes.delayPercent || 0.25; // lower = more eager to hide / show, higher = less eager

                    var onScroll = function() {

                        var document = $document[0].documentElement;
                        var viewportHeight = document.clientHeight;

                        determineWhereElementIsInViewport(el, viewportHeight,
                            scope.whenVisible(), delayPercent, scope);
                    };

                    var unbindDocumentEvents = $document.on('scroll', onScroll);
                    var unbindWindowEvents = angular.element($window).on('resize orientationchange', onScroll);

                    /*scope.$on('$destroy', unbindDocumentEvents);
                     scope.$on('$destroy', unbindWindowEvents);*/

                    // initialise
                    el.data('hidden', true);
                    scope.$evalAsync(onScroll);
                }
            };
        }]);

}());
(function () {
    'use strict';
    angular.module('swoppr', [
        'ngRoute',
        'ngAnimate',
        'angular-scroll-animate',
        'ui.bootstrap'
    ]).
    config(['$routeProvider', '$locationProvider', function ($routeProvider, $locationProvider) {
        $routeProvider.
        when('/', {
            templateUrl: 'partials/index',
            controller: 'IndexCtrl'
        }).
        when('/toRent', {
            templateUrl: 'partials/toRent',
            controller: 'IndexCtrl'
        }).
        when('/placeArticle', {
            templateUrl: 'partials/placeArticle',
            controller: 'IndexCtrl'
        }).
        when('/login', {
            templateUrl: 'partials/login',
            controller: 'IndexCtrl'
        }).
        when('/register', {
            templateUrl: 'partials/register',
            controller: 'IndexCtrl'
        }).
        /*when('/addPost', {
            templateUrl: 'partials/addPost',
            controller: 'AddPostCtrl'
        }).
        when('/readPost/:id', {
            templateUrl: 'partials/readPost',
            controller: 'ReadPostCtrl'
        }).
        when('/editPost/:id', {
            templateUrl: 'partials/editPost',
            controller: 'EditPostCtrl'
        }).
        when('/deletePost/:id', {
            templateUrl: 'partials/deletePost',
            controller: 'DeletePostCtrl'
        }).*/
        otherwise({
            redirectTo: '/'
        });
        $locationProvider.html5Mode(true);
    }]);
}());
/**
 * Created by jonah on 11/14/2015.
 */
(function () {
    'use strict';

    angular.module('swoppr')
        .controller('CarouselCtrl', CarouselCtrl);

    function CarouselCtrl($scope) {
        //$scope.myInterval = 5000;
        $scope.noWrapSlides = true;
        var slides = $scope.slides = [];

        slides.push({
            image: 'images/geldVerdienen.png',
            text: 'Iets nodig maar wil je niet teveel geld uitgeven?'
        });

        slides.push({
            image: 'images/ongebruikteGoederen.png',
            text: "Veel geld uitgegeven maar gebruikt het zelden?"
        });
    }
}());


/**
 * Created by jonah on 11/14/2015.
 */
(function () {
    'use strict';
    angular.module('swoppr')
        .controller('IndexCtrl', IndexCtrl);

    function IndexCtrl ($scope) {
        $scope.fadeIn = function ($el) {
            animate($el, "fadeIn");
        };

        $scope.fadeInUp = function ($el) {
            animate($el, "fadeInUp");
        };

        $scope.fadeInLeft = function ($el) {
            animate($el, "fadeInLeft");
        };

        $scope.fadeInRight = function ($el) {
            animate($el, "fadeInRight");
        };

        $scope.zoomIn = function ($el) {
            animate($el, "zoomIn");
        };
    }
}());

function animate($el, animation) {
    $el.removeClass('hide-for-animation');
    $el.addClass('animated ' + animation);
}
/**
 * Created by jonah on 11/14/2015.
 */
(function () {
    'use strict';

    angular.module('swoppr')
        .controller('NavbarCtrl', NavbarCtrl);

    function NavbarCtrl($scope, $location) {
        //https://jsfiddle.net/xv7tws10/5/
        $scope.isCollapsed = true;

        //http://stackoverflow.com/questions/12592472/how-to-highlight-a-current-menu-item
        $scope.getClass = function (path) {
            if ($location.path() === path) {
                return 'active';
            } else {
                return '';
            }
        };
    }
}());