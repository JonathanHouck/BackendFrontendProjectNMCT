function Message(e,t,r,n,o){this.rentingId=e,this.senderId=t,this.name=r,this.content=n,this.createdOn=o}function Product(e,t,r,n,o,i,a,s,u,c){this.id=e,this.productName=t,this.pricePerDay=r,this.description=n,this.url=o,this.publicid=i,this.place=a,this.longitude=s,this.latitude=u,this.isDeleted=c}function Renting(e,t,r,n,o,i,a,s){this.id=e,this.renterFrom=t,this.renterTo=r,this.productId=n,this.fromDate=o,this.toDate=i,this.daysToRent=a,this.totalPrice=s}function RentingWithUsers(e,t,r,n,o,i,a){this.id=e,this.renterFrom=t,this.renterTo=r,this.fromDate=n,this.toDate=o,this.daysToRent=i,this.totalPrice=a}function UserWithCredentials(e,t,r,n,o,i){this.id=e,this.firstname=t,this.surname=r,this.local=n,this.google=o,this.products=i}function UserWithoutCredentials(e,t,r,n,o){this.id=e,this.firstname=t,this.surname=r,this.emailadres=n,this.product=o}function animate(e,t){e.removeClass("hide-for-animation"),e.addClass("animated "+t)}Product.prototype.toString=function(){return this.productName},Product.prototype.shortDescription=function(){return this.description?this.description.length<250?this.description:this.description.substring(0,250)+" ...":"/"},Product.prototype.shortProductName=function(){return this.productName.length<17?this.productName:this.productName.substring(0,17)+" ..."},Renting.prototype.toString=function(){return this.renterFrom},UserWithCredentials.prototype.toString=function(){return this.firstname+" "+this.surname},UserWithoutCredentials.prototype.toString=function(){return this.firstname+" "+this.surname},function(){"use strict";angular.module("swoppr",["ngRoute","ngMessages","ngAnimate","angular-scroll-animate","ui.bootstrap","httpFactory","ngFileUpload","uiGmapgoogle-maps"]).config(["uiGmapGoogleMapApiProvider","$routeProvider","$locationProvider",function(e,t,r){t.when("/",{templateUrl:"partials/index",controller:"IndexCtrl"}).when("/toRent",{templateUrl:"partials/toRent",controller:"ToRentCtrl",auth:!0}).when("/rentProduct/:id?",{templateUrl:"partials/rentProduct",controller:"RentProductCtrl",auth:!0}).when("/detailProduct/:id?",{templateUrl:"partials/detailProduct",controller:"DetailProductCtrl",auth:!0}).when("/detailRenting/:id?",{templateUrl:"partials/detailRenting",controller:"DetailRentingCtrl",auth:!0}).when("/placeProduct",{templateUrl:"partials/placeProduct",controller:"PlaceProductCtrl",auth:!0}).when("/myProducts",{templateUrl:"partials/myProducts",controller:"MyProductsCtrl"}).when("/editProduct/:id",{templateUrl:"partials/editProduct",controller:"EditProductCtrl"}).when("/myRentings",{templateUrl:"partials/myRentings",controller:"MyRentingsCtrl"}).when("/editRenting/:id",{templateUrl:"partials/editRenting",controller:"EditRentingCtrl"}).when("/login",{templateUrl:"partials/login",controller:"LoginCtrl"}).when("/register",{templateUrl:"partials/register",controller:"RegisterCtrl"}).when("/profile",{templateUrl:"partials/profile",auth:!0}).otherwise({redirectTo:"/"}),r.html5Mode(!0),e.configure({key:"AIzaSyBpqFRZqco4RCdLgKum7ZNF5eNqLiyB9cc",v:"3.17",libraries:"places"})}]).run(["$rootScope","$location","$http","$route","UserService",function(e,t,r,n,o){e.$on("$routeChangeStart",function(r){function i(t){t&&(t.error?e.user="":e.user=t)}function a(e){console.log(e)}e.user||o.userData().then(i,a);var s=t.path(),u=n.routes[s];u&&u.auth&&"error"==e.user&&t.path("/login")})}])}(),function(){"use strict";function e(e){e.noWrapSlides=!0;var t=e.slides=[];t.push({image:"images/geldVerdienen.png",text:"Gebruik je enkel in het weekend uw grasmaaier? Verdien nu in de weekdagen geld ermee!",title:"Geld verdienen"}),t.push({image:"images/kruiwagen.png",text:"Enkel bij het verhuizen een kruiwagen nodig? Huur nu een kruiwagen voor deze periode!",title:"Artikelen verhuren"})}angular.module("swoppr").controller("CarouselCtrl",["$scope",e])}(),function(){"use strict";function e(e,t,r){e.user=[];var n=function(t){e.user=t,"error"!=e.user&&(e.map={center:{latitude:e.user.product.latitude,longitude:e.user.product.longitude},zoom:16},e.marker={id:0,coords:{latitude:e.user.product.latitude,longitude:e.user.product.longitude}})},o=function(e){console.log(e)},i=t.id;r.byIdUser(i).then(n,o)}angular.module("swoppr").controller("DetailProductCtrl",["$scope","$routeParams","ProductService",e])}(),function(){"use strict";function e(e,t,r,n,o){var i=function(r){if("string"==typeof r){if("error"==r)return void(t.whoRents="noRenting")}else if(e.user.id==r.renterFrom.id)t.whoRents="renterFrom",t.renting=r;else{if(e.user.id!=r.renterTo.id)return void(t.whoRents="noAccess");t.whoRents="renterTo",t.renting=r}var n=function(e){t.messages=e},i=function(e){console.log(e)};o.getMessages(s).then(n,i)},a=function(e){console.log(e)},s=r.id;n.byId(s).then(i,a);var u=io.connect();u.emit("join renting",s),u.on("broadcast message",function(e){t.messages.push(e),t.$apply()}),t.addMessage=function(){var e=new Message(s,t.user.id,t.user.toString(),t.content,Date.now()+36e5),r=function(e){t.messages.push(e),u.emit("newMessage",{rentid:s,message:e}),t.content=""},n=function(e){console.log(e)};o.addMessage(e,s).then(r,n)},t.validate=function(e){if(1==e){if(t.chat.content.$dirty&&t.chat.content.$invalid)return"has-error";if(t.chat.content.$dirty&&t.chat.content.$valid)return"has-success"}}}angular.module("swoppr").controller("DetailRentingCtrl",["$rootScope","$scope","$routeParams","RentingService","ChatService",e])}(),function(){"use strict";function e(e,t,r,n,o){function i(t){t.data&&(t.data.ok&&r.path("/detailProduct/"+t.data.ok),t.data.error&&e.alerts.push({type:"danger",msg:t.data.error}))}function a(e){console.log(e)}e.alerts=[],e.closeAlert=function(t){e.alerts.splice(t,1)},e.user=[];var s=function(t){e.user=t},u=function(e){console.log(e)},c=t.id;n.byIdUser(c).then(s,u),o.then(function(t){t.visualRefresh=!0,e.defaultBounds=new google.maps.LatLngBounds(new google.maps.LatLng(50.8252383,3.2481521)),e.map.bounds={northeast:{latitude:e.defaultBounds.getNorthEast().lat(),longitude:e.defaultBounds.getNorthEast().lng()},southwest:{latitude:e.defaultBounds.getSouthWest().lat(),longitude:-e.defaultBounds.getSouthWest().lng()}},e.searchbox.options.bounds=new google.maps.LatLngBounds(e.defaultBounds.getNorthEast(),e.defaultBounds.getSouthWest())}),angular.extend(e,{selected:{options:{visible:!1},templateurl:"../templates/window.html",templateparameter:{}},map:{control:{},center:{latitude:51.052568,longitude:3.1701058},zoom:9,dragging:!1,bounds:{},markers:[],idkey:"place_id",events:{idle:function(e){},dragend:function(t){var r=t.getBounds(),n=r.getNorthEast(),o=r.getSouthWest();e.searchbox.options.bounds=new google.maps.LatLngBounds(o,n)}}},searchbox:{template:"../templates/searchbox.html",options:{autocomplete:!0,types:["geocode"],componentRestrictions:{country:"be"}},events:{place_changed:function(t){var r=t.getPlace();if(r.address_components){var n=[],o=new google.maps.LatLngBounds,i={id:r.place_id,place_id:r.place_id,name:r.address_components[0].long_name,latitude:r.geometry.location.lat(),longitude:r.geometry.location.lng(),options:{visible:!1},templateurl:"window.tpl.html",templateparameter:r};n.push(i),o.extend(r.geometry.location),e.map.bounds={northeast:{latitude:o.getNorthEast().lat(),longitude:o.getNorthEast().lng()},southwest:{latitude:o.getSouthWest().lat(),longitude:o.getSouthWest().lng()}},angular.forEach(n,function(t){t.closeClick=function(){e.selected.options.visible=!1,t.options.visble=!1,console.log(t)},t.onClicked=function(){e.selected.options.visible=!1,e.selected=t,e.selected.options.visible=!0}}),e.map.markers=n,e.user.product.longitude=n[0].longitude,e.user.product.latitude=n[0].latitude,e.user.product.place=r.formatted_address}}}}}),e.editProduct=function(t){n.edit(t,{productId:e.user.product.id,productName:e.user.product.productName,pricePerDay:e.user.product.pricePerDay,description:e.user.product.description,url:e.user.product.url,publicid:e.user.product.publicid,place:e.user.product.place,longitude:e.user.product.longitude,latitude:e.user.product.latitude}).then(i,a)},e.validate=function(t){if(e.editProductForm)if(1==t){if(e.editProductForm.productName.$dirty&&e.editProductForm.productName.$invalid)return"has-error";if(e.editProductForm.productName.$dirty&&e.editProductForm.productName.$valid)return"has-success"}else if(2==t){if(e.editProductForm.pricePerDay.$dirty&&e.editProductForm.pricePerDay.$invalid)return"has-error";if(e.editProductForm.pricePerDay.$dirty&&e.editProductForm.pricePerDay.$valid)return"has-success"}else if(3==t){if(e.editProductForm.description.$dirty&&e.editProductForm.description.$invalid)return"has-error";if(e.editProductForm.description.$dirty&&e.editProductForm.description.$valid)return"has-success"}else if(4==t){if(e.editProductForm.picture.$dirty&&e.editProductForm.picture.$invalid)return"has-error";if(e.editProductForm.picture.$dirty&&e.editProductForm.picture.$valid)return"has-success"}else if(5==t&&e.editProductForm.location.$valid)return"has-success"}}angular.module("swoppr").controller("EditProductCtrl",["$scope","$routeParams","$location","ProductService","uiGmapGoogleMapApi",e])}(),function(){"use strict";function e(e,t,r,n,o){t.alerts=[],t.closeAlert=function(e){t.alerts.splice(e,1)};var i=function(r){if("string"==typeof r){if("error"==r)return void(t.whoRents="noRenting")}else{if(e.user.id==r.renterFrom.id)return void(t.whoRents="noAccess");if(e.user.id!=r.renterTo.id)return void(t.whoRents="noAccess");t.whoRents="renterTo",t.renting=r,t.$watch("renting.fromDate",function(){t.setMinDates(),t.renting.fromDate>=t.renting.toDate&&(t.renting.toDate=new Date(t.renting.fromDate),t.renting.toDate.setDate(t.renting.toDate.getDate()+1)),t.renting.fromDate.status={opened:!1},t.renting.fromDate.open=function(e){t.renting.fromDate.status.opened=!0},t.setDaysToRent()}),t.$watch("renting.toDate",function(){t.setMinDates(),t.renting.toDate.open=function(e){t.renting.toDate.status.opened=!0},t.renting.toDate.status={opened:!1},t.setDaysToRent()}),t.setMinDates=function(){t.renting.fromDate.minDate=new Date,t.renting.toDate.minDate=new Date(t.renting.fromDate),t.renting.toDate.minDate.setDate(t.renting.toDate.minDate.getDate()+1)},t.dateOptions={formatYear:"yy",startingDay:1},t.format="dd/MM/yyyy",t.$watch("renting.renterFrom",function(){t.setDaysToRent()}),t.setDaysToRent=function(){var e=864e5;t.renting.daysToRent=Math.round(Math.abs((t.renting.fromDate.getTime()-t.renting.toDate.getTime())/e)),t.renting.renterFrom.product&&(t.renting.totalPrice=t.renting.renterFrom.product.pricePerDay*t.renting.daysToRent)}}},a=function(e){console.log(e)},s=r.id;o.byId(s).then(i,a);var u=function(e){e.data&&(e.data.ok&&n.path("/detailRenting/"+e.data.ok._id),e.data.error&&t.alerts.push({type:"danger",msg:e.data.error}))},c=function(e){console.log(e)};t.editRenting=function(){if(e.user&&t.renting){var r=new Renting(t.renting.id,t.renting.renterFrom.id,t.renting.renterTo.id,t.renting.renterFrom.product.id,t.renting.fromDate,t.renting.toDate,t.renting.daysToRent,t.renting.totalPrice);o.edit(r).then(u,c)}}}angular.module("swoppr").controller("EditRentingCtrl",["$rootScope","$scope","$routeParams","$location","RentingService",e])}(),function(){"use strict";function e(e){e.fadeIn=function(e){animate(e,"fadeIn")},e.fadeInUp=function(e){animate(e,"fadeInUp")},e.fadeInLeft=function(e){animate(e,"fadeInLeft")},e.fadeInRight=function(e){animate(e,"fadeInRight")},e.zoomIn=function(e){animate(e,"zoomIn")}}angular.module("swoppr").controller("IndexCtrl",["$scope",e])}(),function(){"use strict";function e(e,t,r){t.alerts=[],t.closeAlert=function(e){t.alerts.splice(e,1)},t.login=function(){function n(n){function o(t){e.user=t}function i(e){console.log(e)}n.data&&n.data.error&&t.alerts.push({type:"danger",msg:n.data.error}),r.userData().then(o,i)}function o(e){console.log(e)}r.login({email:this.email,password:this.password}).then(n,o)},t.validate=function(e){if(1==e){if(t.loginForm.email.$dirty&&t.loginForm.email.$invalid)return"has-error";if(t.loginForm.email.$dirty&&t.loginForm.email.$valid)return"has-success"}else if(2==e){if(t.loginForm.password.$dirty&&t.loginForm.password.$invalid)return"has-error";if(t.loginForm.password.$dirty&&t.loginForm.password.$valid)return"has-success"}}}angular.module("swoppr").controller("LoginCtrl",["$rootScope","$scope","UserService",e])}(),function(){"use strict";function e(e,t,r,n,o,i,a,s,u){"product"==u?(t.title="Verwijderen product",t.message="Bent u zeker dat u het artikel "+s+" wilt verwijderen?"):("renting.renterFrom"==u||"renting.renterTo"==u)&&(t.title="Verwijderen verhuring",t.message="Bent u zeker dat u de verhuring voor het artikel "+s+" wilt verwijderen?"),t["delete"]=function(){function t(t){if(t.data.ok){var r;r=n("filter")(e.user.products,function(e){return e.id===t.data.ok})[0];var o=e.user.products.indexOf(r);e.user.products[o].isDeleted=!0}t.data.error&&console.log(t.data.error)}function s(e){console.log(e)}function c(t){if(t.data.ok){var r,o;"renting.renterFrom"==u?(r=n("filter")(e.rentingsRenterFrom,function(e){return e.id===t.data.ok})[0],o=e.rentingsRenterTo.indexOf(r),e.rentingsRenterFrom.splice(o,1)):"renting.renterTo"==u&&(r=n("filter")(e.rentingsRenterTo,function(e){return e.id===t.data.ok})[0],o=e.rentingsRenterTo.indexOf(r),e.rentingsRenterTo.splice(o,1))}t.data.error&&console.log(t.data.error)}function d(e){console.log(e)}"product"==u?i.remove(a).then(t,s):("renting.renterFrom"==u||"renting.renterTo"==u)&&o.remove(a).then(c,d),r.close()},t.cancel=function(){r.dismiss("cancel")}}angular.module("swoppr").controller("ModalInstanceCtrl",["$rootScope","$scope","$uibModalInstance","$filter","RentingService","ProductService","id","product","who",e])}(),function(){"use strict";function e(e,t,r,n){function o(t){t&&(t.error?e.user.products="":e.user.products=t.products)}function i(e){console.log(e)}t.sortType="productName",e.user.products="loading",n.userData().then(o,i),e.$watch("user",function(){e.user&&(t.animationsEnabled=!0,t.open=function(e,n,o){r.open({animation:t.animationsEnabled,templateUrl:"../templates/myModalContent.html",controller:"ModalInstanceCtrl",resolve:{id:function(){return e},product:function(){return n},who:function(){return o}}})})})}angular.module("swoppr").controller("MyProductsCtrl",["$rootScope","$scope","$uibModal","UserService",e])}(),function(){"use strict";function e(e,t,r,n){e.rentingsRenterFrom="loading",e.rentingsRenterTo="loading",t.sortType1="renterFrom.product.productName",t.sortType2="renterFrom.product.productName",e.$watch("user",function(){if(e.user){var o=function(t){e.rentingsRenterFrom=t},i=function(e){console.log(e)};n.byRenterFrom(e.user.id).then(o,i);var a=function(t){e.rentingsRenterTo=t},s=function(e){console.log(e)};n.byRenterTo(e.user.id).then(a,s),t.animationsEnabled=!0,t.open=function(e,n,o){r.open({animation:t.animationsEnabled,templateUrl:"../templates/myModalContent.html",controller:"ModalInstanceCtrl",resolve:{id:function(){return e},product:function(){return n},who:function(){return o}}})}}})}angular.module("swoppr").controller("MyRentingsCtrl",["$rootScope","$scope","$uibModal","RentingService",e])}(),function(){"use strict";function e(e,t){e.isCollapsed=!0,e.getClass=function(e){return t.path()===e?"active":""}}angular.module("swoppr").controller("NavbarCtrl",["$scope","$location",e])}(),function(){"use strict";function e(e,t,r,n,o){function i(e){e.data&&(e.data.ok&&r.path("/detailProduct/"+e.data.ok._id),e.data.error&&t.alerts.push({type:"danger",msg:e.data.error}))}function a(e){console.log(e)}t.alerts=[],t.closeAlert=function(e){t.alerts.splice(e,1)},o.then(function(e){e.visualRefresh=!0,t.defaultBounds=new google.maps.LatLngBounds(new google.maps.LatLng(50.8252383,3.2481521)),t.map.bounds={northeast:{latitude:t.defaultBounds.getNorthEast().lat(),longitude:t.defaultBounds.getNorthEast().lng()},southwest:{latitude:t.defaultBounds.getSouthWest().lat(),longitude:-t.defaultBounds.getSouthWest().lng()}},t.searchbox.options.bounds=new google.maps.LatLngBounds(t.defaultBounds.getNorthEast(),t.defaultBounds.getSouthWest())}),angular.extend(t,{selected:{options:{visible:!1},templateurl:"../templates/window.html",templateparameter:{}},map:{control:{},center:{latitude:51.052568,longitude:3.1701058},zoom:9,dragging:!1,bounds:{},markers:[],idkey:"place_id",events:{idle:function(e){},dragend:function(e){var r=e.getBounds(),n=r.getNorthEast(),o=r.getSouthWest();t.searchbox.options.bounds=new google.maps.LatLngBounds(o,n)}}},searchbox:{template:"../templates/searchbox.html",options:{autocomplete:!0,types:["geocode"],componentRestrictions:{country:"be"}},events:{place_changed:function(e){var r=e.getPlace();if(r.address_components){var n=[],o=new google.maps.LatLngBounds,i={id:r.place_id,place_id:r.place_id,name:r.address_components[0].long_name,latitude:r.geometry.location.lat(),longitude:r.geometry.location.lng(),options:{visible:!1},templateurl:"window.tpl.html",templateparameter:r};n.push(i),o.extend(r.geometry.location),t.map.bounds={northeast:{latitude:o.getNorthEast().lat(),longitude:o.getNorthEast().lng()},southwest:{latitude:o.getSouthWest().lat(),longitude:o.getSouthWest().lng()}},angular.forEach(n,function(e){e.closeClick=function(){t.selected.options.visible=!1,e.options.visble=!1,console.log(e)},e.onClicked=function(){t.selected.options.visible=!1,t.selected=e,t.selected.options.visible=!0}}),t.map.markers=n,t.place=r.formatted_address}}}}}),e.$watch("user",function(){e.user&&(t.addProduct=function(r){n.add(r,{userId:e.user.id,productName:t.productName,pricePerDay:t.pricePerDay,description:t.description,place:t.place,longitude:t.map.markers[0].longitude,latitude:t.map.markers[0].latitude}).then(i,a)})}),t.validate=function(e){if(t.placeProductForm)if(1==e){if(t.placeProductForm.productName.$dirty&&t.placeProductForm.productName.$invalid)return"has-error";if(t.placeProductForm.productName.$dirty&&t.placeProductForm.productName.$valid)return"has-success"}else if(2==e){if(t.placeProductForm.pricePerDay.$dirty&&t.placeProductForm.pricePerDay.$invalid)return"has-error";if(t.placeProductForm.pricePerDay.$dirty&&t.placeProductForm.pricePerDay.$valid)return"has-success"}else if(3==e){if(t.placeProductForm.description.$dirty&&t.placeProductForm.description.$invalid)return"has-error";if(t.placeProductForm.description.$dirty&&t.placeProductForm.description.$valid)return"has-success"}else if(4==e){if(t.placeProductForm.picture.$dirty&&t.placeProductForm.picture.$invalid)return"has-error";if(t.placeProductForm.picture.$dirty&&t.placeProductForm.picture.$valid)return"has-success"}else if(5==e&&t.placeProductForm.place.$valid)return"has-success"}}angular.module("swoppr").controller("PlaceProductCtrl",["$rootScope","$scope","$location","ProductService","uiGmapGoogleMapApi",e])}(),function(){"use strict";function e(e,t,r){t.alerts=[],t.closeAlert=function(e){t.alerts.splice(e,1)},t.register=function(){function n(n){function o(t){e.user=t}function i(e){console.log(e)}n.data&&n.data.error&&t.alerts.push({type:"danger",msg:n.data.error}),r.userData().then(o,i)}function o(e){console.log(e)}r.register({firstname:this.firstname,surname:this.surname,email:this.email,password:this.password}).then(n,o)},t.validate=function(e){if(1==e){if(t.registerForm.firstname.$dirty&&t.registerForm.firstname.$invalid)return"has-error";if(t.registerForm.firstname.$dirty&&t.registerForm.firstname.$valid)return"has-success"}else if(2==e){if(t.registerForm.surname.$dirty&&t.registerForm.surname.$invalid)return"has-error";if(t.registerForm.surname.$dirty&&t.registerForm.surname.$valid)return"has-success"}else if(3==e){if(t.registerForm.email.$dirty&&t.registerForm.email.$invalid)return"has-error";if(t.registerForm.email.$dirty&&t.registerForm.email.$valid)return"has-success"}else if(4==e){if(t.registerForm.password.$dirty&&t.registerForm.password.$invalid)return"has-error";if(t.registerForm.password.$dirty&&t.registerForm.password.$valid)return"has-success"}else if(5==e){if(t.registerForm.passwordAgain.$dirty&&t.registerForm.passwordAgain.$invalid)return"has-error";if(t.registerForm.passwordAgain.$dirty&&t.registerForm.passwordAgain.$valid)return"has-success"}}}angular.module("swoppr").controller("RegisterCtrl",["$rootScope","$scope","UserService",e])}(),function(){"use strict";function e(e,t,r,n,o,i){t.alerts=[],t.closeAlert=function(e){t.alerts.splice(e,1)},t.user=[];var a=r.id,s=function(r){e.user.id==r.id?t.ownProduct=a:r.product&&r.product.isDeleted===!0?t.user="deleted":t.user=r},u=function(e){console.log(e)};o.byIdUser(a).then(s,u),t.setDates=function(){t.dt1=new Date,t.dt2=new Date(t.dt1.getDate()+1)},t.setDates(),t.$watch("dt1",function(){t.setMinDates(),t.dt1>=t.dt2&&(t.dt2=new Date(t.dt1),t.dt2.setDate(t.dt2.getDate()+1)),t.dt1.status={opened:!1},t.dt1.open=function(e){t.dt1.status.opened=!0},t.setDaysToRent()}),t.$watch("dt2",function(){t.setMinDates(),t.dt2.open=function(e){t.dt2.status.opened=!0},t.dt2.status={opened:!1},t.setDaysToRent()}),t.setMinDates=function(){t.dt1.minDate=new Date,t.dt2.minDate=new Date(t.dt1),t.dt2.minDate.setDate(t.dt2.minDate.getDate()+1)},t.dateOptions={formatYear:"yy",startingDay:1},t.format="dd/MM/yyyy",t.$watch("user",function(){t.setDaysToRent()}),t.setDaysToRent=function(){var e=864e5;t.daysToRent=Math.round(Math.abs((t.dt1.getTime()-t.dt2.getTime())/e)),t.user.product&&(t.totalPrice=t.user.product.pricePerDay*t.daysToRent)};var c=function(e){e.data&&(e.data.ok&&n.path("/detailRenting/"+e.data.ok._id),e.data.error&&t.alerts.push({type:"danger",msg:e.data.error}))},d=function(e){console.log(e)};t.rentProduct=function(){if(e.user&&t.user){var r=new Renting;r.renterFrom=t.user.id,r.renterTo=e.user.id,r.productId=t.user.product.id,r.fromDate=t.dt1,r.toDate=t.dt2,r.daysToRent=t.daysToRent,r.totalPrice=t.totalPrice,i.add(r).then(c,d)}}}angular.module("swoppr").controller("RentProductCtrl",["$rootScope","$scope","$routeParams","$location","ProductService","RentingService",e])}(),function(){"use strict";function e(e,t){e.sortProperty="pricePerDay";var r=function(t){e.products=t},n=function(e){console.log(e)};t.all().then(r,n)}angular.module("swoppr").controller("ToRentCtrl",["$scope","ProductService",e])}(),function(){"use strict";function e(e){e.place={},e.showPlaceDetails=function(t){e.place=t}}angular.module("swoppr").controller("WindowCtrl",["$scope",e])}(),function(){"use strict";angular.module("angular-scroll-animate",[]).directive("whenVisible",["$document","$window",function(e,t){var r=function(e,t,r,n,o){var i=e[0].getBoundingClientRect(),a=i.bottom,s=n*i.height,u=a-s>0&&t>a;e.data("hidden")&&u&&(r(e,o),e.data("hidden",!1))};return{restrict:"A",scope:{whenVisible:"&",delayPercent:"=?"},controller:["$scope",function(e){if(!e.whenVisible||!angular.isFunction(e.whenVisible()))throw new Error("Directive: angular-scroll-animate 'when-visible' attribute must specify a function.");if(e.delayPercent){var t=parseFloat(e.delayPercent);if(Number.isNaN(t)||0>t||t>1)throw new Error("Directive: angular-scroll-animate 'delay-percent' attribute must be a decimal fraction between 0 and 1.")}}],link:function(n,o,i){var a=i.delayPercent||.25,s=function(){var t=e[0].documentElement,i=t.clientHeight;r(o,i,n.whenVisible(),a,n)};e.on("scroll",s),angular.element(t).on("resize orientationchange",s);o.data("hidden",!0),n.$evalAsync(s)}}}])}(),function(){"use strict";function e(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(e,t,r,n){n.$validators.compareTo=function(t){return t==e.otherModelValue},e.$watch("otherModelValue",function(){n.$validate()})}}}angular.module("swoppr").directive("compareTo",e)}(),function(){"use strict";function e(e,t){return{restrict:"A",link:function(r,n){n.on("click",function(r){function n(t){e.user=""}function o(e){console.log(e)}r.preventDefault(),t.logout().then(n,o)})}}}angular.module("swoppr").directive("logout",["$rootScope","UserService",e])}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"../templates/product.html"}}angular.module("swoppr").directive("productforrent",e)}(),function(){"use strict";function e(){return{restrict:"A",link:function(e,t,r){t.on("click",function(e){e.preventDefault(),window.location=r.href})}}}angular.module("swoppr").directive("redir",e)}(),function(){angular.module("httpFactory",[]).factory("myHttpResponseInterceptor",["$q","$location",function(e,t){return{response:function(r){return"object"==typeof r.data&&r.data.redirect?(t.path(r.data.redirect),{}||e.when(r)):r||e.when(r)}}}]).config(["$httpProvider",function(e){e.interceptors.push("myHttpResponseInterceptor")}])}(),function(){"use strict";var e=function(e){var t=function(t){var r="/api/chat/"+t;return e.get(r).then(function(e){if(e.data.error)return"error";var t=[];return angular.forEach(e.data.ok,function(e){var r=new Message(e._renting,e._sender,e.name,e.content,e.createdOn);t.push(r)}),t})},r=function(t,r){var n="/api/chat/"+r;return e.post(n,t).then(function(e){if(e.data.error)return"error";var t=e.data.ok,r=new Message(t._renting,t._sender,t.name,t.content,t.createdOn);return r})};return{getMessages:t,addMessage:r}};angular.module("swoppr").factory("ChatService",["$http",e])}(),function(){"use strict";var e=function(e,t){function r(e){var t=e.url?e.url:"/";return new Product(e._id,e.productName,e.pricePerDay,e.description,t,e.publicid,e.place,e.longitude,e.latitude,e.isDeleted)}var n=function(t){var r="/api/product/getById/"+t;return e.get(r).then(function(e){if(e.data.error)return"error";var t=e.data.ok;return new Product(t.productName,t.pricePerDay,t.description,t.createdOn)})},o=function(t){var n="/api/product/getByIdUser/"+t;return e.get(n).then(function(e){if(e.data.error)return"error";var t=e.data.ok.product,n=r(t),o=e.data.ok;return new UserWithoutCredentials(o._id,o.firstname,o.surname,o.local.email,n)})},i=function(){var t="/api/product/getAll/";return e.get(t).then(function(e){if(e.data.error)return"error";var t=[];return angular.forEach(e.data.ok,function(e){if(e.isDeleted===!1){var n=r(e);t.push(n)}}),t})},a=function(r,n){var o="/api/product/newProduct/";if(r){var i=r.upload=t.upload({url:o,file:r,data:n}).then(function(e){return e});return i}return e.post(o,n).then(function(e){return e})},s=function(r,n){var o="/api/product/editProduct/";if(r){var i=r.upload=t.upload({url:o,file:r,data:n}).then(function(e){return e});return i}return e.post(o,n).then(function(e){return e})},u=function(t){var r="/api/product/removeById/"+t;return e.get(r).then(function(e){return e})};return{byId:n,byIdUser:o,all:i,add:a,edit:s,remove:u}};angular.module("swoppr").factory("ProductService",["$http","Upload",e])}(),function(){"use strict";var e=function(e){function t(e){return new Product(e._id,e.productName,parseInt(e.pricePerDay),e.description,e.url,e.publicid,e.place,e.longitude,e.latitude,e.isDeleted)}function r(e,t){return new UserWithoutCredentials(e._id,e.firstname,e.surname,e.local.email,t)}function n(e){return new UserWithoutCredentials(e._id,e.firstname,e.surname,e.local.email)}function o(e,t,r){return new RentingWithUsers(e._id,t,r,new Date(e.fromDate),new Date(e.toDate),parseInt(e.daysToRent),parseInt(e.totalPrice))}var i=function(i){var a="/api/renting/getById/"+i;return e.get(a).then(function(e){if(e.data.error)return"error";var i=e.data.ok,a=i.renterFrom.product,s=t(a),u=i.renterFrom,c=r(u,s),d=i.renterTo,l=n(d),p=i;return o(p,c,l)})},a=function(i){var a="/api/renting/getAllRentingsRenterFrom/"+i;return e.get(a).then(function(e){if(e.data.error)return"error";var i=[];return angular.forEach(e.data.ok,function(e){var a=e.renterFrom.product,s=t(a),u=e.renterFrom,c=r(u,s),d=e.renterTo,l=n(d);i.push(o(e,c,l))}),i})},s=function(i){var a="/api/renting/getAllRentingsRenterTo/"+i;return e.get(a).then(function(e){if(e.data.error)return"error";var i=[];return angular.forEach(e.data.ok,function(e){var a=e.renterFrom.product,s=t(a),u=e.renterFrom,c=r(u,s),d=e.renterTo,l=n(d);i.push(o(e,c,l))}),i})},u=function(t){var r="/api/renting/newRenting/";return e.post(r,t).then(function(e){return e})},c=function(t){var r="/api/renting/editRenting/";return e.post(r,t).then(function(e){return e})},d=function(t){var r="/api/renting/removeById/"+t;return e.get(r).then(function(e){return e})};return{byId:i,byRenterFrom:a,byRenterTo:s,add:u,edit:c,remove:d}};angular.module("swoppr").factory("RentingService",["$http",e])}(),function(){"use strict";var e=function(e){var t=function(t){var r="/partials/login";return e.post(r,t).then(function(e){return e})},r=function(t){var r="/partials/register";return e.post(r,t).then(function(e){return e})},n=function(){var t="/partials/logout";return e.post(t).then(function(e){return e})},o=function(){var t="/api/user/userDataNavbar/"+(new Date).getTime();return e.get(t).then(function(e){if(e.data.error)return"error";var t=[],r=e.data;return angular.forEach(r.products,function(e){if(e.isDeleted===!1){var r=new Product(e._id,e.productName,parseInt(e.pricePerDay),e.description,e.url,e.publicid,e.place,e.longitude,e.latitude,e.isDeleted);t.push(r)}}),new UserWithCredentials(r._id,r.firstname,r.surname,r.local,r.google,t)})},i=function(t){var r="/api/user/getById/"+t;return e.get(r).then(function(e){if(e.data.error)return"error";var t=e.data.ok;return new UserWithCredentials(t.firstname,t.surname,t.local.email,t.products,t.createdOn)})},a=function(){var t="/api/user/getAllUsersWithProducts";return e.get(t).then(function(e){if(e.data.error)return"error";var t=[];return angular.forEach(e.data,function(e){var r=new UserWithCredentials(e.firstname,e.surname,e.local.email,e.products,e.createdOn);t.push(r)}),t})},s=function(){var t="/api/user/getAll/";return e.get(t).then(function(e){if(e.data.error)return"error getting all users";var t=[];return angular.forEach(e.data.ok,function(e){var r=new UserWithCredentials(e.firstname,e.surname,e.local.email,e.products,e.createdOn);t.push(r)}),t})},u=function(t){var r="/api/user/newUser/";e.post(r,t).then(function(e){return e})};return{login:t,register:r,logout:n,userData:o,byId:i,AllWithProducts:a,add:u,all:s}};angular.module("swoppr").factory("UserService",["$http",e])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk1lc3NhZ2UuanMiLCJQcm9kdWN0LmpzIiwiUmVudGluZy5qcyIsIlJlbnRpbmdXaXRoVXNlcnMuanMiLCJVc2VyV2l0aENyZWRlbnRpYWxzLmpzIiwiVXNlcldpdGhvdXRDcmVkZW50aWFscy5qcyIsIkluZGV4Q3RybC5qcyIsImFwcC5qcyIsIkNhcm91c2VsQ3RybC5qcyIsIkRldGFpbFByb2R1Y3RDdHJsLmpzIiwiRGV0YWlsUmVudGluZ0N0cmwuanMiLCJFZGl0UHJvZHVjdEN0cmwuanMiLCJFZGl0UmVudGluZ0N0cmwuanMiLCJMb2dpbkN0cmwuanMiLCJNb2RhbEluc3RhbmNlQ3RybC5qcyIsIk15UHJvZHVjdHNDdHJsLmpzIiwiTXlSZW50aW5nc0N0cmwuanMiLCJOYXZiYXJDdHJsLmpzIiwiUGxhY2VQcm9kdWN0Q3RybC5qcyIsIlJlZ2lzdGVyQ3RybC5qcyIsIlJlbnRQcm9kdWN0Q3RybC5qcyIsIlRvUmVudEN0cmwuanMiLCJXaW5kb3dDdHJsLmpzIiwiYW5ndWxhci1zY3JvbGwtYW5pbWF0ZS5qcyIsImNvbXBhcmVUb0Rpci5qcyIsImxvZ291dERpci5qcyIsInByb2R1Y3REaXIuanMiLCJyZWRpckRpci5qcyIsImh0dHBJbnRlcmNlcHRvci5qcyIsIkNoYXRTZXJ2aWNlLmpzIiwiUHJvZHVjdFNlcnZpY2UuanMiLCJSZW50aW5nU2VydmljZS5qcyIsIlVzZXJTZXJ2aWNlLmpzIl0sIm5hbWVzIjpbIk1lc3NhZ2UiLCJyZW50aW5nSWQiLCJzZW5kZXJJZCIsIm5hbWUiLCJjb250ZW50IiwiY3JlYXRlZE9uIiwidGhpcyIsIlByb2R1Y3QiLCJfaWQiLCJwcm9kdWN0TmFtZSIsInByaWNlUGVyRGF5IiwiZGVzY3JpcHRpb24iLCJ1cmwiLCJwdWJsaWNpZCIsInBsYWNlIiwibG9uZ2l0dWRlIiwibGF0aXR1ZGUiLCJpc0RlbGV0ZWQiLCJpZCIsIlJlbnRpbmciLCJyZW50ZXJJZCIsInVzZXJJZCIsInByb2R1Y3RJZCIsImZyb21EYXRlIiwidG9EYXRlIiwiZGF5c1RvUmVudCIsInRvdGFsUHJpY2UiLCJyZW50ZXJGcm9tIiwicmVudGVyVG8iLCJSZW50aW5nV2l0aFVzZXJzIiwiVXNlcldpdGhDcmVkZW50aWFscyIsImZpcnN0bmFtZSIsInN1cm5hbWUiLCJsb2NhbCIsImdvb2dsZSIsInByb2R1Y3RzIiwiVXNlcldpdGhvdXRDcmVkZW50aWFscyIsImVtYWlsYWRyZXMiLCJwcm9kdWN0IiwiYW5pbWF0ZSIsIiRlbCIsImFuaW1hdGlvbiIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsInNob3J0RGVzY3JpcHRpb24iLCJsZW5ndGgiLCJzdWJzdHJpbmciLCJzaG9ydFByb2R1Y3ROYW1lIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIkdvb2dsZU1hcEFwaSIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiYXV0aCIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJodG1sNU1vZGUiLCJjb25maWd1cmUiLCJrZXkiLCJ2IiwibGlicmFyaWVzIiwicnVuIiwiJHJvb3RTY29wZSIsIiRsb2NhdGlvbiIsIiRodHRwIiwiJHJvdXRlIiwiVXNlclNlcnZpY2UiLCIkb24iLCJuZXh0Iiwic3VjY2VzVXNlckRhdGEiLCJkYXRhIiwiZXJyb3IiLCJ1c2VyIiwiZXJyb3JVc2VyRGF0YSIsInJlc3BvbnNlIiwiY29uc29sZSIsImxvZyIsInVzZXJEYXRhIiwidGhlbiIsIm5leHRQYXRoIiwicGF0aCIsIm5leHRSb3V0ZSIsInJvdXRlcyIsIkNhcm91c2VsQ3RybCIsIiRzY29wZSIsIm5vV3JhcFNsaWRlcyIsInNsaWRlcyIsInB1c2giLCJpbWFnZSIsInRleHQiLCJ0aXRsZSIsIkRldGFpbFByb2R1Y3RDdHJsIiwiJHJvdXRlUGFyYW1zIiwiUHJvZHVjdFNlcnZpY2UiLCJvbkdldFVzZXJXaXRoUHJvZHVjdFN1Y2Nlc2Z1bGwiLCJtYXAiLCJjZW50ZXIiLCJ6b29tIiwibWFya2VyIiwiY29vcmRzIiwib25HZXRVc2VyV2l0aFByb2R1Y3RFcnJvciIsImVyciIsImJ5SWRVc2VyIiwiRGV0YWlsUmVudGluZ0N0cmwiLCJSZW50aW5nU2VydmljZSIsIkNoYXRTZXJ2aWNlIiwib25HZXRSZW50aW5nU3VjY2VzZnVsbCIsInJlbnRpbmciLCJ3aG9SZW50cyIsIm9uR2V0TWVzc2FnZXNTdWNjZXNmdWxsIiwibWVzc2FnZXMiLCJvbkdldE1lc3NhZ2VzRXJyb3IiLCJnZXRNZXNzYWdlcyIsIm9uR2V0UmVudGluZ0Vycm9yIiwiYnlJZCIsInNvY2tldCIsImlvIiwiY29ubmVjdCIsImVtaXQiLCJvbiIsIm1lc3NhZ2UiLCIkYXBwbHkiLCJhZGRNZXNzYWdlIiwibmV3TWVzc2FnZSIsIkRhdGUiLCJub3ciLCJvbkFkZE1lc3NhZ2VTdWNjZXNzZnVsbCIsInJlbnRpZCIsIm9uQWRkTWVzc2FnZUVycm9yIiwidmFsaWRhdGUiLCJmaWVsZCIsImNoYXQiLCIkZGlydHkiLCIkaW52YWxpZCIsIiR2YWxpZCIsIkVkaXRQcm9kdWN0Q3RybCIsInN1Y2Nlc3NFZGl0UHJvZHVjdCIsIm9rIiwiYWxlcnRzIiwidHlwZSIsIm1zZyIsImVycm9yRWRpdFByb2R1Y3QiLCJjbG9zZUFsZXJ0IiwiaW5kZXgiLCJzcGxpY2UiLCJtYXBzIiwidmlzdWFsUmVmcmVzaCIsImRlZmF1bHRCb3VuZHMiLCJMYXRMbmdCb3VuZHMiLCJMYXRMbmciLCJib3VuZHMiLCJub3J0aGVhc3QiLCJnZXROb3J0aEVhc3QiLCJsYXQiLCJsbmciLCJzb3V0aHdlc3QiLCJnZXRTb3V0aFdlc3QiLCJzZWFyY2hib3giLCJvcHRpb25zIiwiZXh0ZW5kIiwic2VsZWN0ZWQiLCJ2aXNpYmxlIiwidGVtcGxhdGV1cmwiLCJ0ZW1wbGF0ZXBhcmFtZXRlciIsImNvbnRyb2wiLCJkcmFnZ2luZyIsIm1hcmtlcnMiLCJpZGtleSIsImV2ZW50cyIsImlkbGUiLCJkcmFnZW5kIiwiZ2V0Qm91bmRzIiwibmUiLCJzdyIsInRlbXBsYXRlIiwiYXV0b2NvbXBsZXRlIiwidHlwZXMiLCJjb21wb25lbnRSZXN0cmljdGlvbnMiLCJjb3VudHJ5IiwicGxhY2VfY2hhbmdlZCIsImdldFBsYWNlIiwiYWRkcmVzc19jb21wb25lbnRzIiwibmV3TWFya2VycyIsInBsYWNlX2lkIiwibG9uZ19uYW1lIiwiZ2VvbWV0cnkiLCJsb2NhdGlvbiIsImZvckVhY2giLCJjbG9zZUNsaWNrIiwidmlzYmxlIiwib25DbGlja2VkIiwiZm9ybWF0dGVkX2FkZHJlc3MiLCJlZGl0UHJvZHVjdCIsImZpbGUiLCJlZGl0IiwiZWRpdFByb2R1Y3RGb3JtIiwicGljdHVyZSIsIkVkaXRSZW50aW5nQ3RybCIsIiR3YXRjaCIsInNldE1pbkRhdGVzIiwic2V0RGF0ZSIsImdldERhdGUiLCJzdGF0dXMiLCJvcGVuZWQiLCJvcGVuIiwiJGV2ZW50Iiwic2V0RGF5c1RvUmVudCIsIm1pbkRhdGUiLCJkYXRlT3B0aW9ucyIsImZvcm1hdFllYXIiLCJzdGFydGluZ0RheSIsImZvcm1hdCIsIm9uZURheSIsIk1hdGgiLCJyb3VuZCIsImFicyIsImdldFRpbWUiLCJvbkFkZFJlbnRpbmdTdWNjZXNzZnVsbCIsInJlc3AiLCJvbkFkZFJlbnRpbmdFcnJvciIsImVkaXRSZW50aW5nIiwiSW5kZXhDdHJsIiwiZmFkZUluIiwiZmFkZUluVXAiLCJmYWRlSW5MZWZ0IiwiZmFkZUluUmlnaHQiLCJ6b29tSW4iLCJMb2dpbkN0cmwiLCJsb2dpbiIsInN1Y2Nlc3NMb2dpbiIsInN1Y2Nlc3NVc2VyRGF0YSIsImVycm9yTG9naW4iLCJlbWFpbCIsInBhc3N3b3JkIiwibG9naW5Gb3JtIiwiTW9kYWxJbnN0YW5jZUN0cmwiLCIkdWliTW9kYWxJbnN0YW5jZSIsIiRmaWx0ZXIiLCJ3aG8iLCJSZW1vdmVQcm9kdWN0U3VjY2Vzc2Z1bGwiLCJwcm9kdWN0VG9EZWxldGUiLCJyIiwiaW5kZXhQcm9kdWN0VG9EZWxldGUiLCJpbmRleE9mIiwiUmVtb3ZlUHJvZHVjdEVycm9yIiwiUmVtb3ZlUmVudGluZ1N1Y2Nlc3NmdWxsIiwicmVudGluZ1RvRGVsZXRlIiwiaW5kZXhSZW50aW5nVG9EZWxldGUiLCJyZW50aW5nc1JlbnRlckZyb20iLCJyZW50aW5nc1JlbnRlclRvIiwiUmVtb3ZlUmVudGluZ0Vycm9yIiwicmVtb3ZlIiwiY2xvc2UiLCJjYW5jZWwiLCJkaXNtaXNzIiwiTXlQcm9kdWN0c0N0cmwiLCIkdWliTW9kYWwiLCJzb3J0VHlwZSIsImFuaW1hdGlvbnNFbmFibGVkIiwicmVzb2x2ZSIsIk15UmVudGluZ3NDdHJsIiwic29ydFR5cGUxIiwic29ydFR5cGUyIiwiZ2V0UmVudGluZ3NCeVJlbnRlckZyb21TdWNjZXNzZnVsbCIsImdldFJlbnRpbmdzQnlSZW50ZXJGcm9tRXJyb3IiLCJieVJlbnRlckZyb20iLCJnZXRSZW50aW5nc0J5UmVudGVyVG9TdWNjZXNzZnVsbCIsImdldFJlbnRpbmdzQnlSZW50ZXJUb0Vycm9yIiwiYnlSZW50ZXJUbyIsIk5hdmJhckN0cmwiLCJpc0NvbGxhcHNlZCIsImdldENsYXNzIiwiUGxhY2VQcm9kdWN0Q3RybCIsInN1Y2Nlc3NBZGRQcm9kdWN0IiwiZXJyb3JBZGRQcm9kdWN0IiwiYWRkUHJvZHVjdCIsImFkZCIsInBsYWNlUHJvZHVjdEZvcm0iLCJSZWdpc3RlckN0cmwiLCJyZWdpc3RlciIsInN1Y2Nlc1JlZ2lzdGVyIiwiZXJyb3JSZWdpc3RlciIsInJlZ2lzdGVyRm9ybSIsInBhc3N3b3JkQWdhaW4iLCJSZW50UHJvZHVjdEN0cmwiLCJvd25Qcm9kdWN0Iiwic2V0RGF0ZXMiLCJkdDEiLCJkdDIiLCJyZW50UHJvZHVjdCIsIlRvUmVudEN0cmwiLCJzb3J0UHJvcGVydHkiLCJvbkdldFByb2R1Y3RzU3VjY2VzZnVsbCIsIm9uR2V0UHJvZHVjdHNFcnJvciIsImFsbCIsIldpbmRvd0N0cmwiLCJzaG93UGxhY2VEZXRhaWxzIiwicGFyYW0iLCJkaXJlY3RpdmUiLCIkZG9jdW1lbnQiLCIkd2luZG93IiwiZGV0ZXJtaW5lV2hlcmVFbGVtZW50SXNJblZpZXdwb3J0Iiwidmlld3BvcnRIZWlnaHQiLCJ3aGVuVmlzaWJsZUZuIiwiZGVsYXlQZXJjZW50Iiwic2NvcGUiLCJlbGVtZW50Qm91bmRzIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicGFuZWxCb3R0b20iLCJib3R0b20iLCJkZWxheVB4IiwiaGVpZ2h0IiwiYm90dG9tVmlzaWJsZSIsInJlc3RyaWN0Iiwid2hlblZpc2libGUiLCJpc0Z1bmN0aW9uIiwiRXJyb3IiLCJwYXJzZUZsb2F0IiwiTnVtYmVyIiwiaXNOYU4iLCJsaW5rIiwiZWwiLCJhdHRyaWJ1dGVzIiwib25TY3JvbGwiLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsImNsaWVudEhlaWdodCIsImVsZW1lbnQiLCIkZXZhbEFzeW5jIiwiY29tcGFyZVRvRGlyIiwicmVxdWlyZSIsIm90aGVyTW9kZWxWYWx1ZSIsIm5nTW9kZWwiLCIkdmFsaWRhdG9ycyIsImNvbXBhcmVUbyIsIm1vZGVsVmFsdWUiLCIkdmFsaWRhdGUiLCJsb2dvdXREaXIiLCJlIiwic3VjY2Vzc0xvZ291dCIsImVycm9yTG9nb3V0IiwicHJldmVudERlZmF1bHQiLCJsb2dvdXQiLCJwcm9kdWN0RGlyIiwicmVkaXJEaXIiLCJhdHRycyIsIndpbmRvdyIsImhyZWYiLCJmYWN0b3J5IiwiJHEiLCJyZWRpcmVjdCIsIiRodHRwUHJvdmlkZXIiLCJpbnRlcmNlcHRvcnMiLCJNZXNzYWdlU2VydmljZSIsImdldCIsIm0iLCJfcmVudGluZyIsIl9zZW5kZXIiLCJwb3N0IiwiVXBsb2FkIiwibWFrZVByb2R1Y3QiLCJwIiwidSIsInVwbG9hZGVyIiwidXBsb2FkIiwicGFyc2VJbnQiLCJtYWtlUmVudGVyRnJvbSIsInJmIiwibWFrZVJlbnRlclRvIiwicnQiLCJtYWtlUmVudGluZyIsInJlbnRpbmdzIiwiY3JlZGVudGlhbHMiLCJBbGxXaXRoUHJvZHVjdHMiLCJ1c2VycyJdLCJtYXBwaW5ncyI6IkFBR0EsUUFBQUEsU0FBQUMsRUFBQUMsRUFB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ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBqb25haCBvbiAxMi8yNC8yMDE1LlxyXG4gKi9cclxuZnVuY3Rpb24gTWVzc2FnZShyZW50aW5nSWQsIHNlbmRlcklkLCBuYW1lLCBjb250ZW50LCBjcmVhdGVkT24pIHtcclxuICAgIHRoaXMucmVudGluZ0lkID0gcmVudGluZ0lkO1xyXG4gICAgdGhpcy5zZW5kZXJJZCA9IHNlbmRlcklkO1xyXG4gICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XHJcbiAgICB0aGlzLmNyZWF0ZWRPbiA9IGNyZWF0ZWRPbjtcclxufSIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEdyZWcgb24gMDQtRGVjLTE1LlxyXG4gKi9cclxuZnVuY3Rpb24gUHJvZHVjdChfaWQsIHByb2R1Y3ROYW1lLCBwcmljZVBlckRheSwgZGVzY3JpcHRpb24sIHVybCwgcHVibGljaWQsIHBsYWNlLCBsb25naXR1ZGUsIGxhdGl0dWRlLCBpc0RlbGV0ZWQpe1xyXG4gICAgdGhpcy5pZCA9IF9pZDtcclxuICAgIHRoaXMucHJvZHVjdE5hbWUgPSBwcm9kdWN0TmFtZTtcclxuICAgIHRoaXMucHJpY2VQZXJEYXkgPSBwcmljZVBlckRheTtcclxuICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcclxuICAgIHRoaXMudXJsID0gdXJsO1xyXG4gICAgdGhpcy5wdWJsaWNpZCA9IHB1YmxpY2lkO1xyXG4gICAgdGhpcy5wbGFjZSA9IHBsYWNlO1xyXG4gICAgdGhpcy5sb25naXR1ZGUgPSBsb25naXR1ZGU7XHJcbiAgICB0aGlzLmxhdGl0dWRlID0gbGF0aXR1ZGU7XHJcbiAgICB0aGlzLmlzRGVsZXRlZCA9IGlzRGVsZXRlZDtcclxufVxyXG5cclxuUHJvZHVjdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpe1xyXG4gICAgcmV0dXJuIHRoaXMucHJvZHVjdE5hbWU7XHJcbn07XHJcblxyXG5Qcm9kdWN0LnByb3RvdHlwZS5zaG9ydERlc2NyaXB0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoIXRoaXMuZGVzY3JpcHRpb24pIHJldHVybiBcIi9cIjtcclxuXHJcbiAgICBpZiAodGhpcy5kZXNjcmlwdGlvbi5sZW5ndGggPCAyNTApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kZXNjcmlwdGlvbjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVzY3JpcHRpb24uc3Vic3RyaW5nKDAsIDI1MCkgKyBcIiAuLi5cIjtcclxuICAgIH1cclxufTtcclxuXHJcblByb2R1Y3QucHJvdG90eXBlLnNob3J0UHJvZHVjdE5hbWUgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICh0aGlzLnByb2R1Y3ROYW1lLmxlbmd0aCA8IDE3KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvZHVjdE5hbWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnByb2R1Y3ROYW1lLnN1YnN0cmluZygwLCAxNykgKyBcIiAuLi5cIjtcclxuICAgIH1cclxufTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBHcmVnIG9uIDA0LURlYy0xNS5cclxuICovXHJcbmZ1bmN0aW9uIFJlbnRpbmcoaWQsIHJlbnRlcklkLCB1c2VySWQsIHByb2R1Y3RJZCwgZnJvbURhdGUsIHRvRGF0ZSwgZGF5c1RvUmVudCwgdG90YWxQcmljZSkge1xyXG4gICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgdGhpcy5yZW50ZXJGcm9tID0gcmVudGVySWQ7XHJcbiAgICB0aGlzLnJlbnRlclRvID0gdXNlcklkO1xyXG4gICAgdGhpcy5wcm9kdWN0SWQgPSBwcm9kdWN0SWQ7XHJcbiAgICB0aGlzLmZyb21EYXRlID0gZnJvbURhdGU7XHJcbiAgICB0aGlzLnRvRGF0ZSA9IHRvRGF0ZTtcclxuICAgIHRoaXMuZGF5c1RvUmVudCA9IGRheXNUb1JlbnQ7XHJcbiAgICB0aGlzLnRvdGFsUHJpY2UgPSB0b3RhbFByaWNlO1xyXG59XHJcblxyXG5SZW50aW5nLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCl7XHJcbiAgICByZXR1cm4gdGhpcy5yZW50ZXJGcm9tO1xyXG59OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGpvbmFoIG9uIDEyLzIzLzIwMTUuXHJcbiAqL1xyXG5mdW5jdGlvbiBSZW50aW5nV2l0aFVzZXJzKGlkLCByZW50ZXJGcm9tLCByZW50ZXJUbywgZnJvbURhdGUsIHRvRGF0ZSwgZGF5c1RvUmVudCwgdG90YWxQcmljZSkge1xyXG4gICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgdGhpcy5yZW50ZXJGcm9tID0gcmVudGVyRnJvbTtcclxuICAgIHRoaXMucmVudGVyVG8gPSByZW50ZXJUbztcclxuICAgIHRoaXMuZnJvbURhdGUgPSBmcm9tRGF0ZTtcclxuICAgIHRoaXMudG9EYXRlID0gdG9EYXRlO1xyXG4gICAgdGhpcy5kYXlzVG9SZW50ID0gZGF5c1RvUmVudDtcclxuICAgIHRoaXMudG90YWxQcmljZSA9IHRvdGFsUHJpY2U7XHJcbn0iLCIvKipcclxuICogQ3JlYXRlZCBieSBHcmVnIG9uIDA0LURlYy0xNS5cclxuICovXHJcbmZ1bmN0aW9uIFVzZXJXaXRoQ3JlZGVudGlhbHMoX2lkLCBmaXJzdG5hbWUsIHN1cm5hbWUsIGxvY2FsLCBnb29nbGUsIHByb2R1Y3RzKXtcclxuICAgIHRoaXMuaWQgPSBfaWQ7XHJcbiAgICB0aGlzLmZpcnN0bmFtZSA9IGZpcnN0bmFtZTtcclxuICAgIHRoaXMuc3VybmFtZSA9IHN1cm5hbWU7XHJcbiAgICB0aGlzLmxvY2FsID0gbG9jYWw7XHJcbiAgICB0aGlzLmdvb2dsZSA9IGdvb2dsZTtcclxuICAgIHRoaXMucHJvZHVjdHMgPSBwcm9kdWN0cztcclxufVxyXG5cclxuVXNlcldpdGhDcmVkZW50aWFscy5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLmZpcnN0bmFtZSArIFwiIFwiICsgdGhpcy5zdXJuYW1lO1xyXG59OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGpvbmFoIG9uIDEyLzIzLzIwMTUuXHJcbiAqL1xyXG5mdW5jdGlvbiBVc2VyV2l0aG91dENyZWRlbnRpYWxzKF9pZCwgZmlyc3RuYW1lLCBzdXJuYW1lLCBlbWFpbGFkcmVzLCBwcm9kdWN0KSB7XHJcbiAgICB0aGlzLmlkID0gX2lkO1xyXG4gICAgdGhpcy5maXJzdG5hbWUgPSBmaXJzdG5hbWU7XHJcbiAgICB0aGlzLnN1cm5hbWUgPSBzdXJuYW1lO1xyXG4gICAgdGhpcy5lbWFpbGFkcmVzID0gZW1haWxhZHJlcztcclxuICAgIHRoaXMucHJvZHVjdCA9IHByb2R1Y3Q7XHJcbn1cclxuXHJcblVzZXJXaXRob3V0Q3JlZGVudGlhbHMucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKXtcclxuICAgIHJldHVybiB0aGlzLmZpcnN0bmFtZSArIFwiIFwiICsgdGhpcy5zdXJuYW1lO1xyXG59OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGpvbmFoIG9uIDExLzE0LzIwMTUuXHJcbiAqL1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ3N3b3BwcicpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0luZGV4Q3RybCcsIFsnJHNjb3BlJywgSW5kZXhDdHJsXSk7XHJcblxyXG4gICAgZnVuY3Rpb24gSW5kZXhDdHJsICgkc2NvcGUpIHtcclxuICAgICAgICAkc2NvcGUuZmFkZUluID0gZnVuY3Rpb24gKCRlbCkge1xyXG4gICAgICAgICAgICBhbmltYXRlKCRlbCwgXCJmYWRlSW5cIik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmZhZGVJblVwID0gZnVuY3Rpb24gKCRlbCkge1xyXG4gICAgICAgICAgICBhbmltYXRlKCRlbCwgXCJmYWRlSW5VcFwiKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZmFkZUluTGVmdCA9IGZ1bmN0aW9uICgkZWwpIHtcclxuICAgICAgICAgICAgYW5pbWF0ZSgkZWwsIFwiZmFkZUluTGVmdFwiKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZmFkZUluUmlnaHQgPSBmdW5jdGlvbiAoJGVsKSB7XHJcbiAgICAgICAgICAgIGFuaW1hdGUoJGVsLCBcImZhZGVJblJpZ2h0XCIpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS56b29tSW4gPSBmdW5jdGlvbiAoJGVsKSB7XHJcbiAgICAgICAgICAgIGFuaW1hdGUoJGVsLCBcInpvb21JblwiKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59KCkpO1xyXG5cclxuZnVuY3Rpb24gYW5pbWF0ZSgkZWwsIGFuaW1hdGlvbikge1xyXG4gICAgJGVsLnJlbW92ZUNsYXNzKCdoaWRlLWZvci1hbmltYXRpb24nKTtcclxuICAgICRlbC5hZGRDbGFzcygnYW5pbWF0ZWQgJyArIGFuaW1hdGlvbik7XHJcbn0iLCIoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ3N3b3BwcicsIFtcclxuICAgICAgICAnbmdSb3V0ZScsXHJcbiAgICAgICAgJ25nTWVzc2FnZXMnLFxyXG4gICAgICAgICduZ0FuaW1hdGUnLFxyXG4gICAgICAgICdhbmd1bGFyLXNjcm9sbC1hbmltYXRlJyxcclxuICAgICAgICAndWkuYm9vdHN0cmFwJyxcclxuICAgICAgICAnaHR0cEZhY3RvcnknLFxyXG4gICAgICAgICduZ0ZpbGVVcGxvYWQnLFxyXG4gICAgICAgICd1aUdtYXBnb29nbGUtbWFwcydcclxuICAgIF0pXHJcbiAgICAuXHJcbiAgICBjb25maWcoWyd1aUdtYXBHb29nbGVNYXBBcGlQcm92aWRlcicsICckcm91dGVQcm92aWRlcicsICckbG9jYXRpb25Qcm92aWRlcicsIGZ1bmN0aW9uIChHb29nbGVNYXBBcGksICRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xyXG4gICAgICAgICRyb3V0ZVByb3ZpZGVyLlxyXG4gICAgICAgIHdoZW4oJy8nLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvaW5kZXgnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnSW5kZXhDdHJsJ1xyXG4gICAgICAgIH0pLlxyXG4gICAgICAgIHdoZW4oJy90b1JlbnQnLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvdG9SZW50JyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1RvUmVudEN0cmwnLFxyXG4gICAgICAgICAgICBhdXRoOiB0cnVlXHJcbiAgICAgICAgfSkuXHJcbiAgICAgICAgd2hlbignL3JlbnRQcm9kdWN0LzppZD8nLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvcmVudFByb2R1Y3QnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUmVudFByb2R1Y3RDdHJsJyxcclxuICAgICAgICAgICAgYXV0aDogdHJ1ZVxyXG4gICAgICAgIH0pLlxyXG4gICAgICAgIHdoZW4oJy9kZXRhaWxQcm9kdWN0LzppZD8nLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvZGV0YWlsUHJvZHVjdCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdEZXRhaWxQcm9kdWN0Q3RybCcsXHJcbiAgICAgICAgICAgIGF1dGg6IHRydWVcclxuICAgICAgICB9KS5cclxuICAgICAgICB3aGVuKCcvZGV0YWlsUmVudGluZy86aWQ/Jywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL2RldGFpbFJlbnRpbmcnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnRGV0YWlsUmVudGluZ0N0cmwnLFxyXG4gICAgICAgICAgICBhdXRoOiB0cnVlXHJcbiAgICAgICAgfSkuXHJcbiAgICAgICAgd2hlbignL3BsYWNlUHJvZHVjdCcsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9wbGFjZVByb2R1Y3QnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUGxhY2VQcm9kdWN0Q3RybCcsXHJcbiAgICAgICAgICAgIGF1dGg6IHRydWVcclxuICAgICAgICB9KS5cclxuICAgICAgICB3aGVuKCcvbXlQcm9kdWN0cycsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9teVByb2R1Y3RzJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ015UHJvZHVjdHNDdHJsJ1xyXG4gICAgICAgIH0pLlxyXG4gICAgICAgIHdoZW4oJy9lZGl0UHJvZHVjdC86aWQnLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvZWRpdFByb2R1Y3QnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnRWRpdFByb2R1Y3RDdHJsJ1xyXG4gICAgICAgIH0pLlxyXG4gICAgICAgIHdoZW4oJy9teVJlbnRpbmdzJywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL215UmVudGluZ3MnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnTXlSZW50aW5nc0N0cmwnXHJcbiAgICAgICAgfSkuXHJcbiAgICAgICAgd2hlbignL2VkaXRSZW50aW5nLzppZCcsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9lZGl0UmVudGluZycsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdFZGl0UmVudGluZ0N0cmwnXHJcbiAgICAgICAgfSkuXHJcbiAgICAgICAgd2hlbignL2xvZ2luJywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL2xvZ2luJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0xvZ2luQ3RybCdcclxuICAgICAgICB9KS5cclxuICAgICAgICB3aGVuKCcvcmVnaXN0ZXInLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvcmVnaXN0ZXInLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUmVnaXN0ZXJDdHJsJ1xyXG4gICAgICAgIH0pLlxyXG4gICAgICAgIHdoZW4oJy9wcm9maWxlJywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL3Byb2ZpbGUnLFxyXG4gICAgICAgICAgICBhdXRoOiB0cnVlXHJcbiAgICAgICAgfSkuXHJcbiAgICAgICAgb3RoZXJ3aXNlKHtcclxuICAgICAgICAgICAgcmVkaXJlY3RUbzogJy8nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xyXG5cclxuICAgICAgICBHb29nbGVNYXBBcGkuY29uZmlndXJlKHtcclxuICAgICAgICAgICAga2V5OiAnQUl6YVN5QnBxRlJacWNvNFJDZExnS3VtN1pORjVlTnFMaXlCOWNjJyxcclxuICAgICAgICAgICAgdjogJzMuMTcnLFxyXG4gICAgICAgICAgICBsaWJyYXJpZXM6ICdwbGFjZXMnXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XSlcclxuICAgIC5cclxuICAgIHJ1bihbJyRyb290U2NvcGUnLCAnJGxvY2F0aW9uJywgJyRodHRwJywgJyRyb3V0ZScsICdVc2VyU2VydmljZScsIGZ1bmN0aW9uKCRyb290U2NvcGUsICRsb2NhdGlvbiwgJGh0dHAsICRyb3V0ZSwgVXNlclNlcnZpY2UpIHtcclxuICAgICAgICAkcm9vdFNjb3BlLiRvbiggXCIkcm91dGVDaGFuZ2VTdGFydFwiLCBmdW5jdGlvbihuZXh0KSB7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc1VzZXJEYXRhKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS51c2VyID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnVzZXIgPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZXJyb3JVc2VyRGF0YShyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoISRyb290U2NvcGUudXNlcikge1xyXG4gICAgICAgICAgICAgICAgVXNlclNlcnZpY2UudXNlckRhdGEoKS50aGVuKHN1Y2Nlc1VzZXJEYXRhLCBlcnJvclVzZXJEYXRhKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIG5leHRQYXRoID0gJGxvY2F0aW9uLnBhdGgoKTtcclxuICAgICAgICAgICAgdmFyIG5leHRSb3V0ZSA9ICRyb3V0ZS5yb3V0ZXNbbmV4dFBhdGhdO1xyXG5cclxuICAgICAgICAgICAgaWYgKG5leHRSb3V0ZSkge1xyXG4gICAgICAgICAgICAgICAgLy9hbHMgcGFnaW5hIGdlYXV0aG9yaXplZXJkIG1vZXQgemlqbiBlbiBlciBnZWVuIHVzZXIgaW5nZWxvZ2QgaXMgLS0+IG5hYXIgbG9naW5wYWdpbmFcclxuICAgICAgICAgICAgICAgIGlmIChuZXh0Um91dGUuYXV0aCAmJiAoJHJvb3RTY29wZS51c2VyID09IFwiZXJyb3JcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9sb2dpblwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfV0pO1xyXG59KCkpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGpvbmFoIG9uIDExLzE0LzIwMTUuXHJcbiAqL1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdzd29wcHInKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdDYXJvdXNlbEN0cmwnLCBbJyRzY29wZScsIENhcm91c2VsQ3RybF0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIENhcm91c2VsQ3RybCgkc2NvcGUpIHtcclxuICAgICAgICAvLyRzY29wZS5teUludGVydmFsID0gNTAwMDtcclxuICAgICAgICAkc2NvcGUubm9XcmFwU2xpZGVzID0gdHJ1ZTtcclxuICAgICAgICB2YXIgc2xpZGVzID0gJHNjb3BlLnNsaWRlcyA9IFtdO1xyXG5cclxuICAgICAgICBzbGlkZXMucHVzaCh7XHJcbiAgICAgICAgICAgIGltYWdlOiAnaW1hZ2VzL2dlbGRWZXJkaWVuZW4ucG5nJyxcclxuICAgICAgICAgICAgdGV4dDogJ0dlYnJ1aWsgamUgZW5rZWwgaW4gaGV0IHdlZWtlbmQgdXcgZ3Jhc21hYWllcj8gVmVyZGllbiBudSBpbiBkZSB3ZWVrZGFnZW4gZ2VsZCBlcm1lZSEnLFxyXG4gICAgICAgICAgICB0aXRsZTogJ0dlbGQgdmVyZGllbmVuJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBzbGlkZXMucHVzaCh7XHJcbiAgICAgICAgICAgIGltYWdlOiAnaW1hZ2VzL2tydWl3YWdlbi5wbmcnLFxyXG4gICAgICAgICAgICB0ZXh0OiAnRW5rZWwgYmlqIGhldCB2ZXJodWl6ZW4gZWVuIGtydWl3YWdlbiBub2RpZz8gSHV1ciBudSBlZW4ga3J1aXdhZ2VuIHZvb3IgZGV6ZSBwZXJpb2RlIScsXHJcbiAgICAgICAgICAgIHRpdGxlOiAnQXJ0aWtlbGVuIHZlcmh1cmVuJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KCkpO1xyXG5cclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgam9uYWggb24gMTEvMTQvMjAxNS5cclxuICovXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ3N3b3BwcicpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0RldGFpbFByb2R1Y3RDdHJsJywgWyckc2NvcGUnLCAnJHJvdXRlUGFyYW1zJywgJ1Byb2R1Y3RTZXJ2aWNlJywgRGV0YWlsUHJvZHVjdEN0cmxdKTtcclxuXHJcbiAgICBmdW5jdGlvbiBEZXRhaWxQcm9kdWN0Q3RybCgkc2NvcGUsICRyb3V0ZVBhcmFtcywgUHJvZHVjdFNlcnZpY2UpIHtcclxuICAgICAgICAkc2NvcGUudXNlciA9IFtdO1xyXG5cclxuICAgICAgICB2YXIgb25HZXRVc2VyV2l0aFByb2R1Y3RTdWNjZXNmdWxsID0gZnVuY3Rpb24odXNlcikge1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLnVzZXIgPSB1c2VyO1xyXG4gICAgICAgICAgICBpZiAoJHNjb3BlLnVzZXIgIT0gXCJlcnJvclwiKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubWFwID0ge2NlbnRlcjoge2xhdGl0dWRlOiAkc2NvcGUudXNlci5wcm9kdWN0LmxhdGl0dWRlLCBsb25naXR1ZGU6ICRzY29wZS51c2VyLnByb2R1Y3QubG9uZ2l0dWRlIH0sIHpvb206IDE2IH07XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubWFya2VyID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvb3Jkczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXRpdHVkZTogJHNjb3BlLnVzZXIucHJvZHVjdC5sYXRpdHVkZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9uZ2l0dWRlOiAkc2NvcGUudXNlci5wcm9kdWN0LmxvbmdpdHVkZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgb25HZXRVc2VyV2l0aFByb2R1Y3RFcnJvciA9IGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBwcm9kdWN0SWQgPSAkcm91dGVQYXJhbXMuaWQ7XHJcbiAgICAgICAgUHJvZHVjdFNlcnZpY2UuYnlJZFVzZXIocHJvZHVjdElkKS50aGVuKG9uR2V0VXNlcldpdGhQcm9kdWN0U3VjY2VzZnVsbCwgb25HZXRVc2VyV2l0aFByb2R1Y3RFcnJvcik7XHJcbiAgICB9XHJcbn0oKSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgam9uYWggb24gMTIvMjMvMjAxNS5cclxuICovXHJcblxyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ3N3b3BwcicpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0RldGFpbFJlbnRpbmdDdHJsJywgWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckcm91dGVQYXJhbXMnLCAnUmVudGluZ1NlcnZpY2UnLCAnQ2hhdFNlcnZpY2UnLCBEZXRhaWxSZW50aW5nQ3RybF0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIERldGFpbFJlbnRpbmdDdHJsKCRyb290U2NvcGUsICRzY29wZSwgJHJvdXRlUGFyYW1zLCBSZW50aW5nU2VydmljZSwgQ2hhdFNlcnZpY2UpIHtcclxuICAgICAgICAvL3JlbnRpbmcgb3BoYWxlblxyXG4gICAgICAgIHZhciBvbkdldFJlbnRpbmdTdWNjZXNmdWxsID0gZnVuY3Rpb24ocmVudGluZykge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHJlbnRpbmcgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZW50aW5nID09IFwiZXJyb3JcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS53aG9SZW50cyA9ICdub1JlbnRpbmcnO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmICgkcm9vdFNjb3BlLnVzZXIuaWQgPT0gcmVudGluZy5yZW50ZXJGcm9tLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUud2hvUmVudHMgPSAncmVudGVyRnJvbSc7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVudGluZyA9IHJlbnRpbmc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJHJvb3RTY29wZS51c2VyLmlkID09IHJlbnRpbmcucmVudGVyVG8uaWQpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS53aG9SZW50cyA9ICdyZW50ZXJUbyc7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVudGluZyA9IHJlbnRpbmc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUud2hvUmVudHMgPSAnbm9BY2Nlc3MnO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgb25HZXRNZXNzYWdlc1N1Y2Nlc2Z1bGwgPSBmdW5jdGlvbihtZXNzYWdlcykge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm1lc3NhZ2VzID0gbWVzc2FnZXM7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB2YXIgb25HZXRNZXNzYWdlc0Vycm9yID0gZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgQ2hhdFNlcnZpY2UuZ2V0TWVzc2FnZXMocmVudGluZ0lkKS50aGVuKG9uR2V0TWVzc2FnZXNTdWNjZXNmdWxsLCBvbkdldE1lc3NhZ2VzRXJyb3IpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vbWVzc2FnZXMgb3BoYWxlblxyXG4gICAgICAgIHZhciBvbkdldFJlbnRpbmdFcnJvciA9IGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciByZW50aW5nSWQgPSAkcm91dGVQYXJhbXMuaWQ7XHJcbiAgICAgICAgUmVudGluZ1NlcnZpY2UuYnlJZChyZW50aW5nSWQpLnRoZW4ob25HZXRSZW50aW5nU3VjY2VzZnVsbCwgb25HZXRSZW50aW5nRXJyb3IpO1xyXG5cclxuICAgICAgICB2YXIgc29ja2V0ID0gaW8uY29ubmVjdCgpO1xyXG5cclxuICAgICAgICBzb2NrZXQuZW1pdChcImpvaW4gcmVudGluZ1wiLCByZW50aW5nSWQpO1xyXG4gICAgICAgIHNvY2tldC5vbihcImJyb2FkY2FzdCBtZXNzYWdlXCIsIGZ1bmN0aW9uKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgJHNjb3BlLm1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XHJcbiAgICAgICAgICAgICRzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy9tZXNzYWdlIHRvZW92ZWdlblxyXG4gICAgICAgICRzY29wZS5hZGRNZXNzYWdlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBuZXdNZXNzYWdlID0gbmV3IE1lc3NhZ2UoXHJcbiAgICAgICAgICAgICAgICByZW50aW5nSWQsXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudXNlci5pZCxcclxuICAgICAgICAgICAgICAgICRzY29wZS51c2VyLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY29udGVudCxcclxuICAgICAgICAgICAgICAgIERhdGUubm93KCkgKyA2MCAqIDYwMDAwXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICB2YXIgb25BZGRNZXNzYWdlU3VjY2Vzc2Z1bGwgPSBmdW5jdGlvbihtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubWVzc2FnZXMucHVzaChtZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIHNvY2tldC5lbWl0KFwibmV3TWVzc2FnZVwiLCB7cmVudGlkOiByZW50aW5nSWQsIG1lc3NhZ2U6IG1lc3NhZ2V9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY29udGVudCA9IFwiXCI7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB2YXIgb25BZGRNZXNzYWdlRXJyb3IgPSBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBDaGF0U2VydmljZS5hZGRNZXNzYWdlKG5ld01lc3NhZ2UsIHJlbnRpbmdJZCkudGhlbihvbkFkZE1lc3NhZ2VTdWNjZXNzZnVsbCwgb25BZGRNZXNzYWdlRXJyb3IpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS52YWxpZGF0ZSA9IGZ1bmN0aW9uKGZpZWxkKSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNoYXQuY29udGVudC4kZGlydHkgJiYgJHNjb3BlLmNoYXQuY29udGVudC4kaW52YWxpZCkgcmV0dXJuICdoYXMtZXJyb3InO1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jaGF0LmNvbnRlbnQuJGRpcnR5ICYmICRzY29wZS5jaGF0LmNvbnRlbnQuJHZhbGlkKSByZXR1cm4gXCJoYXMtc3VjY2Vzc1wiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSgpKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBqb25haCBvbiAxMi8yNy8yMDE1LlxyXG4gKi9cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnc3dvcHByJylcclxuICAgICAgICAuY29udHJvbGxlcignRWRpdFByb2R1Y3RDdHJsJywgWyckc2NvcGUnLCAnJHJvdXRlUGFyYW1zJywgJyRsb2NhdGlvbicsICdQcm9kdWN0U2VydmljZScsICd1aUdtYXBHb29nbGVNYXBBcGknLCBFZGl0UHJvZHVjdEN0cmxdKTtcclxuXHJcbiAgICBmdW5jdGlvbiBFZGl0UHJvZHVjdEN0cmwoJHNjb3BlLCAkcm91dGVQYXJhbXMsICRsb2NhdGlvbiwgUHJvZHVjdFNlcnZpY2UsIEdvb2dsZU1hcEFwaSkge1xyXG5cclxuICAgICAgICAkc2NvcGUuYWxlcnRzID0gW107XHJcblxyXG4gICAgICAgICRzY29wZS5jbG9zZUFsZXJ0ID0gZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmFsZXJ0cy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS51c2VyID0gW107XHJcblxyXG4gICAgICAgIHZhciBvbkdldFVzZXJXaXRoUHJvZHVjdFN1Y2Nlc2Z1bGwgPSBmdW5jdGlvbih1c2VyKSB7XHJcbiAgICAgICAgICAgICRzY29wZS51c2VyID0gdXNlcjtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgb25HZXRVc2VyV2l0aFByb2R1Y3RFcnJvciA9IGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBwcm9kdWN0SWQgPSAkcm91dGVQYXJhbXMuaWQ7XHJcbiAgICAgICAgUHJvZHVjdFNlcnZpY2UuYnlJZFVzZXIocHJvZHVjdElkKS50aGVuKG9uR2V0VXNlcldpdGhQcm9kdWN0U3VjY2VzZnVsbCwgb25HZXRVc2VyV2l0aFByb2R1Y3RFcnJvcik7XHJcblxyXG4gICAgICAgIEdvb2dsZU1hcEFwaS50aGVuKGZ1bmN0aW9uKG1hcHMpIHtcclxuICAgICAgICAgICAgbWFwcy52aXN1YWxSZWZyZXNoID0gdHJ1ZTtcclxuICAgICAgICAgICAgJHNjb3BlLmRlZmF1bHRCb3VuZHMgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzKFxyXG4gICAgICAgICAgICAgICAgbmV3IGdvb2dsZS5tYXBzLkxhdExuZyg1MC44MjUyMzgzLCAzLjI0ODE1MjEwKSk7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUubWFwLmJvdW5kcyA9IHtcclxuICAgICAgICAgICAgICAgIG5vcnRoZWFzdDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhdGl0dWRlOiRzY29wZS5kZWZhdWx0Qm91bmRzLmdldE5vcnRoRWFzdCgpLmxhdCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvbmdpdHVkZTokc2NvcGUuZGVmYXVsdEJvdW5kcy5nZXROb3J0aEVhc3QoKS5sbmcoKVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHNvdXRod2VzdDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhdGl0dWRlOiRzY29wZS5kZWZhdWx0Qm91bmRzLmdldFNvdXRoV2VzdCgpLmxhdCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvbmdpdHVkZTotJHNjb3BlLmRlZmF1bHRCb3VuZHMuZ2V0U291dGhXZXN0KCkubG5nKClcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICRzY29wZS5zZWFyY2hib3gub3B0aW9ucy5ib3VuZHMgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzKCRzY29wZS5kZWZhdWx0Qm91bmRzLmdldE5vcnRoRWFzdCgpLCAkc2NvcGUuZGVmYXVsdEJvdW5kcy5nZXRTb3V0aFdlc3QoKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGFuZ3VsYXIuZXh0ZW5kKCRzY29wZSwge1xyXG4gICAgICAgICAgICBzZWxlY3RlZDoge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgICAgIHZpc2libGU6ZmFsc2VcclxuXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGV1cmw6ICcuLi90ZW1wbGF0ZXMvd2luZG93Lmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVwYXJhbWV0ZXI6IHt9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1hcDoge1xyXG4gICAgICAgICAgICAgICAgY29udHJvbDoge30sXHJcbiAgICAgICAgICAgICAgICBjZW50ZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICBsYXRpdHVkZTogNTEuMDUyNTY4LFxyXG4gICAgICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogMy4xNzAxMDU4XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgem9vbTogOSxcclxuICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGJvdW5kczoge30sXHJcbiAgICAgICAgICAgICAgICBtYXJrZXJzOiBbXSxcclxuICAgICAgICAgICAgICAgIGlka2V5OiAncGxhY2VfaWQnLFxyXG4gICAgICAgICAgICAgICAgZXZlbnRzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWRsZTogZnVuY3Rpb24gKG1hcCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRyYWdlbmQ6IGZ1bmN0aW9uKG1hcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3VwZGF0ZSB0aGUgc2VhcmNoIGJveCBib3VuZHMgYWZ0ZXIgZHJhZ2dpbmcgdGhlIG1hcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm91bmRzID0gbWFwLmdldEJvdW5kcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmUgPSBib3VuZHMuZ2V0Tm9ydGhFYXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdyA9IGJvdW5kcy5nZXRTb3V0aFdlc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNlYXJjaGJveC5vcHRpb25zLmJvdW5kcyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmdCb3VuZHMoc3csIG5lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8kc2NvcGUuc2VhcmNoYm94Lm9wdGlvbnMudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZWFyY2hib3g6IHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnLi4vdGVtcGxhdGVzL3NlYXJjaGJveC5odG1sJyxcclxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBhdXRvY29tcGxldGU6dHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlczogWydnZW9jb2RlJ10sXHJcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50UmVzdHJpY3Rpb25zOiB7Y291bnRyeTogJ2JlJ31cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBldmVudHM6IHtcclxuICAgICAgICAgICAgICAgICAgICBwbGFjZV9jaGFuZ2VkOiBmdW5jdGlvbiAoYXV0b2NvbXBsZXRlKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwbGFjZSA9IGF1dG9jb21wbGV0ZS5nZXRQbGFjZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBsYWNlLmFkZHJlc3NfY29tcG9uZW50cykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdNYXJrZXJzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXJrZXIgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6cGxhY2UucGxhY2VfaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VfaWQ6IHBsYWNlLnBsYWNlX2lkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHBsYWNlLmFkZHJlc3NfY29tcG9uZW50c1swXS5sb25nX25hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF0aXR1ZGU6IHBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uLmxhdCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogcGxhY2UuZ2VvbWV0cnkubG9jYXRpb24ubG5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOmZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZXVybDond2luZG93LnRwbC5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZXBhcmFtZXRlcjogcGxhY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TWFya2Vycy5wdXNoKG1hcmtlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm91bmRzLmV4dGVuZChwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1hcC5ib3VuZHMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ydGhlYXN0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhdGl0dWRlOiBib3VuZHMuZ2V0Tm9ydGhFYXN0KCkubGF0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogYm91bmRzLmdldE5vcnRoRWFzdCgpLmxuZygpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3V0aHdlc3Q6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF0aXR1ZGU6IGJvdW5kcy5nZXRTb3V0aFdlc3QoKS5sYXQoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9uZ2l0dWRlOiBib3VuZHMuZ2V0U291dGhXZXN0KCkubG5nKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChuZXdNYXJrZXJzLCBmdW5jdGlvbihtYXJrZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL18uZWFjaChuZXdNYXJrZXJzLCBmdW5jdGlvbihtYXJrZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXIuY2xvc2VDbGljayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWQub3B0aW9ucy52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlci5vcHRpb25zLnZpc2JsZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobWFya2VyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlci5vbkNsaWNrZWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkLm9wdGlvbnMudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWQgPSBtYXJrZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZC5vcHRpb25zLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubWFwLm1hcmtlcnMgPSBuZXdNYXJrZXJzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS51c2VyLnByb2R1Y3QubG9uZ2l0dWRlID0gbmV3TWFya2Vyc1swXS5sb25naXR1ZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXNlci5wcm9kdWN0LmxhdGl0dWRlID0gbmV3TWFya2Vyc1swXS5sYXRpdHVkZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS51c2VyLnByb2R1Y3QucGxhY2UgPSAgcGxhY2UuZm9ybWF0dGVkX2FkZHJlc3M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc3VjY2Vzc0VkaXRQcm9kdWN0KHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5vaykge1xyXG4gICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2RldGFpbFByb2R1Y3QvXCIgKyByZXNwb25zZS5kYXRhLm9rKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hbGVydHMucHVzaCh7dHlwZTogJ2RhbmdlcicsIG1zZzogcmVzcG9uc2UuZGF0YS5lcnJvcn0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBlcnJvckVkaXRQcm9kdWN0KHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRzY29wZS5lZGl0UHJvZHVjdCA9IGZ1bmN0aW9uKGZpbGUpIHtcclxuICAgICAgICAgICAgUHJvZHVjdFNlcnZpY2UuZWRpdChmaWxlLCB7XHJcbiAgICAgICAgICAgICAgICBwcm9kdWN0SWQ6ICRzY29wZS51c2VyLnByb2R1Y3QuaWQsXHJcbiAgICAgICAgICAgICAgICBwcm9kdWN0TmFtZTogJHNjb3BlLnVzZXIucHJvZHVjdC5wcm9kdWN0TmFtZSxcclxuICAgICAgICAgICAgICAgIHByaWNlUGVyRGF5OiAkc2NvcGUudXNlci5wcm9kdWN0LnByaWNlUGVyRGF5LFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICRzY29wZS51c2VyLnByb2R1Y3QuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICB1cmw6ICRzY29wZS51c2VyLnByb2R1Y3QudXJsLFxyXG4gICAgICAgICAgICAgICAgcHVibGljaWQ6ICRzY29wZS51c2VyLnByb2R1Y3QucHVibGljaWQsXHJcbiAgICAgICAgICAgICAgICBwbGFjZTogJHNjb3BlLnVzZXIucHJvZHVjdC5wbGFjZSxcclxuICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogJHNjb3BlLnVzZXIucHJvZHVjdC5sb25naXR1ZGUsXHJcbiAgICAgICAgICAgICAgICBsYXRpdHVkZTogJHNjb3BlLnVzZXIucHJvZHVjdC5sYXRpdHVkZVxyXG4gICAgICAgICAgICB9KS50aGVuKHN1Y2Nlc3NFZGl0UHJvZHVjdCwgZXJyb3JFZGl0UHJvZHVjdCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnZhbGlkYXRlID0gZnVuY3Rpb24oZmllbGQpIHtcclxuICAgICAgICAgICAgaWYoJHNjb3BlLmVkaXRQcm9kdWN0Rm9ybSlcclxuICAgICAgICAgICAgICAgIGlmIChmaWVsZCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5lZGl0UHJvZHVjdEZvcm0ucHJvZHVjdE5hbWUuJGRpcnR5ICYmICRzY29wZS5lZGl0UHJvZHVjdEZvcm0ucHJvZHVjdE5hbWUuJGludmFsaWQpIHJldHVybiAnaGFzLWVycm9yJztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmVkaXRQcm9kdWN0Rm9ybS5wcm9kdWN0TmFtZS4kZGlydHkgJiYgJHNjb3BlLmVkaXRQcm9kdWN0Rm9ybS5wcm9kdWN0TmFtZS4kdmFsaWQpIHJldHVybiBcImhhcy1zdWNjZXNzXCI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGZpZWxkID09IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmVkaXRQcm9kdWN0Rm9ybS5wcmljZVBlckRheS4kZGlydHkgJiYgJHNjb3BlLmVkaXRQcm9kdWN0Rm9ybS5wcmljZVBlckRheS4kaW52YWxpZCkgcmV0dXJuICdoYXMtZXJyb3InO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuZWRpdFByb2R1Y3RGb3JtLnByaWNlUGVyRGF5LiRkaXJ0eSAmJiAkc2NvcGUuZWRpdFByb2R1Y3RGb3JtLnByaWNlUGVyRGF5LiR2YWxpZCkgcmV0dXJuIFwiaGFzLXN1Y2Nlc3NcIjtcclxuICAgICAgICAgICAgICAgIH0gIGVsc2UgaWYgKGZpZWxkID09IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmVkaXRQcm9kdWN0Rm9ybS5kZXNjcmlwdGlvbi4kZGlydHkgJiYgJHNjb3BlLmVkaXRQcm9kdWN0Rm9ybS5kZXNjcmlwdGlvbi4kaW52YWxpZCkgcmV0dXJuICdoYXMtZXJyb3InO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuZWRpdFByb2R1Y3RGb3JtLmRlc2NyaXB0aW9uLiRkaXJ0eSAmJiAkc2NvcGUuZWRpdFByb2R1Y3RGb3JtLmRlc2NyaXB0aW9uLiR2YWxpZCkgcmV0dXJuIFwiaGFzLXN1Y2Nlc3NcIjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZmllbGQgPT0gNCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuZWRpdFByb2R1Y3RGb3JtLnBpY3R1cmUuJGRpcnR5ICYmICRzY29wZS5lZGl0UHJvZHVjdEZvcm0ucGljdHVyZS4kaW52YWxpZCkgcmV0dXJuICdoYXMtZXJyb3InO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuZWRpdFByb2R1Y3RGb3JtLnBpY3R1cmUuJGRpcnR5ICYmICRzY29wZS5lZGl0UHJvZHVjdEZvcm0ucGljdHVyZS4kdmFsaWQpIHJldHVybiBcImhhcy1zdWNjZXNzXCI7XHJcbiAgICAgICAgICAgICAgICB9ICBlbHNlIGlmIChmaWVsZCA9PSA1KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5lZGl0UHJvZHVjdEZvcm0ubG9jYXRpb24uJHZhbGlkKSByZXR1cm4gXCJoYXMtc3VjY2Vzc1wiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn0oKSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgam9uYWggb24gMTIvMjYvMjAxNS5cclxuICovXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnc3dvcHByJylcclxuICAgICAgICAuY29udHJvbGxlcignRWRpdFJlbnRpbmdDdHJsJywgWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckcm91dGVQYXJhbXMnLCAnJGxvY2F0aW9uJywgJ1JlbnRpbmdTZXJ2aWNlJywgRWRpdFJlbnRpbmdDdHJsXSk7XHJcblxyXG4gICAgZnVuY3Rpb24gRWRpdFJlbnRpbmdDdHJsKCRyb290U2NvcGUsICRzY29wZSwgJHJvdXRlUGFyYW1zLCAkbG9jYXRpb24sIFJlbnRpbmdTZXJ2aWNlKSB7XHJcblxyXG4gICAgICAgICRzY29wZS5hbGVydHMgPSBbXTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmNsb3NlQWxlcnQgPSBmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuYWxlcnRzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIG9uR2V0UmVudGluZ1N1Y2Nlc2Z1bGwgPSBmdW5jdGlvbihyZW50aW5nKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVudGluZyA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlbnRpbmcgPT0gXCJlcnJvclwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLndob1JlbnRzID0gJ25vUmVudGluZyc7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL3JlbnRlckZyb20ga2FuIHZlcmh1cmluZyBuaWV0IGJld2Vya2VuXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJHJvb3RTY29wZS51c2VyLmlkID09IHJlbnRpbmcucmVudGVyRnJvbS5pZCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLndob1JlbnRzID0gJ25vQWNjZXNzJztcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICgkcm9vdFNjb3BlLnVzZXIuaWQgPT0gcmVudGluZy5yZW50ZXJUby5pZCkge1xyXG5cclxuICAgICAgICAgICAgICAgICRzY29wZS53aG9SZW50cyA9ICdyZW50ZXJUbyc7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVudGluZyA9IHJlbnRpbmc7XHJcblxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLiR3YXRjaCgncmVudGluZy5mcm9tRGF0ZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zZXRNaW5EYXRlcygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZigkc2NvcGUucmVudGluZy5mcm9tRGF0ZSA+PSAkc2NvcGUucmVudGluZy50b0RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlbnRpbmcudG9EYXRlID0gbmV3IERhdGUoJHNjb3BlLnJlbnRpbmcuZnJvbURhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVudGluZy50b0RhdGUuc2V0RGF0ZSgkc2NvcGUucmVudGluZy50b0RhdGUuZ2V0RGF0ZSgpICsxKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yZW50aW5nLmZyb21EYXRlLnN0YXR1cyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3BlbmVkOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yZW50aW5nLmZyb21EYXRlLm9wZW4gPSBmdW5jdGlvbigkZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlbnRpbmcuZnJvbURhdGUuc3RhdHVzLm9wZW5lZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNldERheXNUb1JlbnQoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICRzY29wZS4kd2F0Y2goJ3JlbnRpbmcudG9EYXRlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNldE1pbkRhdGVzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yZW50aW5nLnRvRGF0ZS5vcGVuID0gZnVuY3Rpb24oJGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5yZW50aW5nLnRvRGF0ZS5zdGF0dXMub3BlbmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVudGluZy50b0RhdGUuc3RhdHVzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVuZWQ6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNldERheXNUb1JlbnQoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICRzY29wZS5zZXRNaW5EYXRlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yZW50aW5nLmZyb21EYXRlLm1pbkRhdGUgPSBuZXcgRGF0ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVudGluZy50b0RhdGUubWluRGF0ZSA9IG5ldyBEYXRlKCRzY29wZS5yZW50aW5nLmZyb21EYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVudGluZy50b0RhdGUubWluRGF0ZS5zZXREYXRlKCRzY29wZS5yZW50aW5nLnRvRGF0ZS5taW5EYXRlLmdldERhdGUoKSArMSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICRzY29wZS5kYXRlT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXRZZWFyOiAneXknLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0aW5nRGF5OiAxXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICRzY29wZS5mb3JtYXQgPSAnZGQvTU0veXl5eSc7XHJcblxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLiR3YXRjaCgncmVudGluZy5yZW50ZXJGcm9tJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNldERheXNUb1JlbnQoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICRzY29wZS5zZXREYXlzVG9SZW50ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9uZURheSA9IDI0KjYwKjYwKjEwMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlbnRpbmcuZGF5c1RvUmVudCA9IE1hdGgucm91bmQoTWF0aC5hYnMoKCRzY29wZS5yZW50aW5nLmZyb21EYXRlLmdldFRpbWUoKSAtICRzY29wZS5yZW50aW5nLnRvRGF0ZS5nZXRUaW1lKCkpLyhvbmVEYXkpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucmVudGluZy5yZW50ZXJGcm9tLnByb2R1Y3QpICRzY29wZS5yZW50aW5nLnRvdGFsUHJpY2UgPSAkc2NvcGUucmVudGluZy5yZW50ZXJGcm9tLnByb2R1Y3QucHJpY2VQZXJEYXkgKiAkc2NvcGUucmVudGluZy5kYXlzVG9SZW50O1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUud2hvUmVudHMgPSAnbm9BY2Nlc3MnO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9tZXNzYWdlcyBvcGhhbGVuXHJcbiAgICAgICAgdmFyIG9uR2V0UmVudGluZ0Vycm9yID0gZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIHJlbnRpbmdJZCA9ICRyb3V0ZVBhcmFtcy5pZDtcclxuICAgICAgICBSZW50aW5nU2VydmljZS5ieUlkKHJlbnRpbmdJZCkudGhlbihvbkdldFJlbnRpbmdTdWNjZXNmdWxsLCBvbkdldFJlbnRpbmdFcnJvcik7XHJcblxyXG4gICAgICAgIHZhciBvbkFkZFJlbnRpbmdTdWNjZXNzZnVsbCA9IGZ1bmN0aW9uKHJlc3ApIHtcclxuICAgICAgICAgICAgaWYgKHJlc3AuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3AuZGF0YS5vaykge1xyXG4gICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvZGV0YWlsUmVudGluZy8nICsgcmVzcC5kYXRhLm9rLl9pZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcC5kYXRhLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFsZXJ0cy5wdXNoKHt0eXBlOiAnZGFuZ2VyJywgbXNnOiByZXNwLmRhdGEuZXJyb3J9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBvbkFkZFJlbnRpbmdFcnJvciA9IGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5lZGl0UmVudGluZyA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgaWYgKCRyb290U2NvcGUudXNlciAmJiAkc2NvcGUucmVudGluZykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlbnRpbmcgPSBuZXcgUmVudGluZyhcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVudGluZy5pZCxcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVudGluZy5yZW50ZXJGcm9tLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yZW50aW5nLnJlbnRlclRvLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yZW50aW5nLnJlbnRlckZyb20ucHJvZHVjdC5pZCxcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVudGluZy5mcm9tRGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVudGluZy50b0RhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlbnRpbmcuZGF5c1RvUmVudCxcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVudGluZy50b3RhbFByaWNlXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIFJlbnRpbmdTZXJ2aWNlLmVkaXQocmVudGluZykudGhlbihvbkFkZFJlbnRpbmdTdWNjZXNzZnVsbCwgb25BZGRSZW50aW5nRXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSgpKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBqb25haCBvbiAxMS8yMS8yMDE1LlxyXG4gKi9cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdzd29wcHInKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdMb2dpbkN0cmwnLCBbJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJ1VzZXJTZXJ2aWNlJywgTG9naW5DdHJsXSk7XHJcblxyXG4gICAgZnVuY3Rpb24gTG9naW5DdHJsICgkcm9vdFNjb3BlLCAkc2NvcGUsIFVzZXJTZXJ2aWNlKSB7XHJcblxyXG4gICAgICAgICRzY29wZS5hbGVydHMgPSBbXTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmNsb3NlQWxlcnQgPSBmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuYWxlcnRzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmxvZ2luID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBzdWNjZXNzTG9naW4ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFsZXJ0cy5wdXNoKHt0eXBlOiAnZGFuZ2VyJywgbXNnOiByZXNwb25zZS5kYXRhLmVycm9yfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3NVc2VyRGF0YShkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS51c2VyID0gZGF0YTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBlcnJvclVzZXJEYXRhKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBVc2VyU2VydmljZS51c2VyRGF0YSgpLnRoZW4oc3VjY2Vzc1VzZXJEYXRhLCBlcnJvclVzZXJEYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiBlcnJvckxvZ2luKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFVzZXJTZXJ2aWNlLmxvZ2luKHtlbWFpbDogdGhpcy5lbWFpbCwgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmR9KS50aGVuKHN1Y2Nlc3NMb2dpbiwgZXJyb3JMb2dpbik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnZhbGlkYXRlID0gZnVuY3Rpb24oZmllbGQpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkID09IDEpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUubG9naW5Gb3JtLmVtYWlsLiRkaXJ0eSAmJiAkc2NvcGUubG9naW5Gb3JtLmVtYWlsLiRpbnZhbGlkKSByZXR1cm4gJ2hhcy1lcnJvcic7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmxvZ2luRm9ybS5lbWFpbC4kZGlydHkgJiYgJHNjb3BlLmxvZ2luRm9ybS5lbWFpbC4kdmFsaWQpIHJldHVybiBcImhhcy1zdWNjZXNzXCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmllbGQgPT0gMikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5sb2dpbkZvcm0ucGFzc3dvcmQuJGRpcnR5ICYmICRzY29wZS5sb2dpbkZvcm0ucGFzc3dvcmQuJGludmFsaWQpIHJldHVybiAnaGFzLWVycm9yJztcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUubG9naW5Gb3JtLnBhc3N3b3JkLiRkaXJ0eSAmJiAkc2NvcGUubG9naW5Gb3JtLnBhc3N3b3JkLiR2YWxpZCkgcmV0dXJuIFwiaGFzLXN1Y2Nlc3NcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn0oKSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgam9uYWggb24gMTIvMjYvMjAxNS5cclxuICovXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ3N3b3BwcicpXHJcbiAgICAgICAgICAgIC5jb250cm9sbGVyKCdNb2RhbEluc3RhbmNlQ3RybCcsIFsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHVpYk1vZGFsSW5zdGFuY2UnLCAnJGZpbHRlcicsICdSZW50aW5nU2VydmljZScsICdQcm9kdWN0U2VydmljZScsICdpZCcsICdwcm9kdWN0JywgJ3dobycsIE1vZGFsSW5zdGFuY2VDdHJsXSk7XHJcblxyXG4gICAgZnVuY3Rpb24gTW9kYWxJbnN0YW5jZUN0cmwoJHJvb3RTY29wZSwgJHNjb3BlLCAkdWliTW9kYWxJbnN0YW5jZSwgJGZpbHRlciwgUmVudGluZ1NlcnZpY2UsIFByb2R1Y3RTZXJ2aWNlLCBpZCwgcHJvZHVjdCwgd2hvKSB7XHJcblxyXG4gICAgICAgIGlmICh3aG8gPT0gXCJwcm9kdWN0XCIpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnRpdGxlID0gXCJWZXJ3aWpkZXJlbiBwcm9kdWN0XCI7XHJcbiAgICAgICAgICAgICRzY29wZS5tZXNzYWdlID0gXCJCZW50IHUgemVrZXIgZGF0IHUgaGV0IGFydGlrZWwgXCIgKyBwcm9kdWN0ICsgXCIgd2lsdCB2ZXJ3aWpkZXJlbj9cIjtcclxuICAgICAgICB9IGVsc2UgaWYgKHdobyA9PSBcInJlbnRpbmcucmVudGVyRnJvbVwiIHx8IHdobyA9PSBcInJlbnRpbmcucmVudGVyVG9cIikge1xyXG4gICAgICAgICAgICAkc2NvcGUudGl0bGUgPSBcIlZlcndpamRlcmVuIHZlcmh1cmluZ1wiO1xyXG4gICAgICAgICAgICAkc2NvcGUubWVzc2FnZSA9IFwiQmVudCB1IHpla2VyIGRhdCB1IGRlIHZlcmh1cmluZyB2b29yIGhldCBhcnRpa2VsIFwiICsgcHJvZHVjdCArIFwiIHdpbHQgdmVyd2lqZGVyZW4/XCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkc2NvcGUuZGVsZXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBSZW1vdmVQcm9kdWN0U3VjY2Vzc2Z1bGwocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLm9rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb2R1Y3RUb0RlbGV0ZTtcclxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0VG9EZWxldGUgPSAkZmlsdGVyKCdmaWx0ZXInKSgkcm9vdFNjb3BlLnVzZXIucHJvZHVjdHMsIGZ1bmN0aW9uKHIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIuaWQgPT09IHJlc3BvbnNlLmRhdGEub2s7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4UHJvZHVjdFRvRGVsZXRlID0gJHJvb3RTY29wZS51c2VyLnByb2R1Y3RzLmluZGV4T2YocHJvZHVjdFRvRGVsZXRlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS51c2VyLnByb2R1Y3RzW2luZGV4UHJvZHVjdFRvRGVsZXRlXS5pc0RlbGV0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YS5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIFJlbW92ZVByb2R1Y3RFcnJvcihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBSZW1vdmVSZW50aW5nU3VjY2Vzc2Z1bGwocmVzcG9uc2UpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5vaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZW50aW5nVG9EZWxldGU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4UmVudGluZ1RvRGVsZXRlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL2tpamtlbiB1aXQgd2Vsa2UgJHJvb3RTY29wZSBkZSByZW50aW5nIHZlcndpamRlcmQgbW9ldCB3b3JkZW5cclxuICAgICAgICAgICAgICAgICAgICBpZiAod2hvID09IFwicmVudGluZy5yZW50ZXJGcm9tXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVudGluZ1RvRGVsZXRlID0gJGZpbHRlcignZmlsdGVyJykoJHJvb3RTY29wZS5yZW50aW5nc1JlbnRlckZyb20sIGZ1bmN0aW9uKHIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByLmlkID09PSByZXNwb25zZS5kYXRhLm9rO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhSZW50aW5nVG9EZWxldGUgPSAkcm9vdFNjb3BlLnJlbnRpbmdzUmVudGVyVG8uaW5kZXhPZihyZW50aW5nVG9EZWxldGUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5yZW50aW5nc1JlbnRlckZyb20uc3BsaWNlKGluZGV4UmVudGluZ1RvRGVsZXRlLCAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh3aG8gPT0gXCJyZW50aW5nLnJlbnRlclRvXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVudGluZ1RvRGVsZXRlID0gJGZpbHRlcignZmlsdGVyJykoJHJvb3RTY29wZS5yZW50aW5nc1JlbnRlclRvLCBmdW5jdGlvbihyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gci5pZCA9PT0gcmVzcG9uc2UuZGF0YS5vaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4UmVudGluZ1RvRGVsZXRlID0gJHJvb3RTY29wZS5yZW50aW5nc1JlbnRlclRvLmluZGV4T2YocmVudGluZ1RvRGVsZXRlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUucmVudGluZ3NSZW50ZXJUby5zcGxpY2UoaW5kZXhSZW50aW5nVG9EZWxldGUsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBSZW1vdmVSZW50aW5nRXJyb3IocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHdobyA9PSBcInByb2R1Y3RcIikge1xyXG4gICAgICAgICAgICAgICAgUHJvZHVjdFNlcnZpY2UucmVtb3ZlKGlkKS50aGVuKFJlbW92ZVByb2R1Y3RTdWNjZXNzZnVsbCwgUmVtb3ZlUHJvZHVjdEVycm9yKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh3aG8gPT0gXCJyZW50aW5nLnJlbnRlckZyb21cIiB8fCB3aG8gPT0gXCJyZW50aW5nLnJlbnRlclRvXCIpIHtcclxuICAgICAgICAgICAgICAgIFJlbnRpbmdTZXJ2aWNlLnJlbW92ZShpZCkudGhlbihSZW1vdmVSZW50aW5nU3VjY2Vzc2Z1bGwsIFJlbW92ZVJlbnRpbmdFcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICR1aWJNb2RhbEluc3RhbmNlLmNsb3NlKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHVpYk1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSgpKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBqb25haCBvbiAxMi8yNy8yMDE1LlxyXG4gKi9cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnc3dvcHByJylcclxuICAgICAgICAuY29udHJvbGxlcignTXlQcm9kdWN0c0N0cmwnLCBbJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyR1aWJNb2RhbCcsICdVc2VyU2VydmljZScsIE15UHJvZHVjdHNDdHJsXSk7XHJcblxyXG4gICAgZnVuY3Rpb24gTXlQcm9kdWN0c0N0cmwoJHJvb3RTY29wZSwgJHNjb3BlLCAkdWliTW9kYWwsIFVzZXJTZXJ2aWNlKSB7XHJcblxyXG4gICAgICAgICRzY29wZS5zb3J0VHlwZSA9IFwicHJvZHVjdE5hbWVcIjtcclxuXHJcbiAgICAgICAgJHJvb3RTY29wZS51c2VyLnByb2R1Y3RzID0gXCJsb2FkaW5nXCI7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc1VzZXJEYXRhKGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS51c2VyLnByb2R1Y3RzID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS51c2VyLnByb2R1Y3RzID0gZGF0YS5wcm9kdWN0cztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZXJyb3JVc2VyRGF0YShyZXNwb25zZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBVc2VyU2VydmljZS51c2VyRGF0YSgpLnRoZW4oc3VjY2VzVXNlckRhdGEsIGVycm9yVXNlckRhdGEpO1xyXG5cclxuICAgICAgICAkcm9vdFNjb3BlLiR3YXRjaCgndXNlcicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAoJHJvb3RTY29wZS51c2VyKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICRzY29wZS5vcGVuID0gZnVuY3Rpb24gKGlkLCBwcm9kdWN0LCB3aG8pIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbW9kYWxJbnN0YW5jZSA9ICR1aWJNb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uOiAkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnLi4vdGVtcGxhdGVzL215TW9kYWxDb250ZW50Lmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnTW9kYWxJbnN0YW5jZUN0cmwnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvZHVjdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aG86IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3aG87XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSgpKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBqb25haCBvbiAxMi8yNS8yMDE1LlxyXG4gKi9cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnc3dvcHByJylcclxuICAgICAgICAuY29udHJvbGxlcignTXlSZW50aW5nc0N0cmwnLCBbJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyR1aWJNb2RhbCcsICdSZW50aW5nU2VydmljZScsIE15UmVudGluZ3NDdHJsXSk7XHJcblxyXG4gICAgZnVuY3Rpb24gTXlSZW50aW5nc0N0cmwoJHJvb3RTY29wZSwgJHNjb3BlLCAkdWliTW9kYWwsIFJlbnRpbmdTZXJ2aWNlKSB7XHJcbiAgICAgICAgJHJvb3RTY29wZS5yZW50aW5nc1JlbnRlckZyb20gPSBcImxvYWRpbmdcIjtcclxuICAgICAgICAkcm9vdFNjb3BlLnJlbnRpbmdzUmVudGVyVG8gPSBcImxvYWRpbmdcIjtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNvcnRUeXBlMSA9IFwicmVudGVyRnJvbS5wcm9kdWN0LnByb2R1Y3ROYW1lXCI7XHJcbiAgICAgICAgJHNjb3BlLnNvcnRUeXBlMiA9IFwicmVudGVyRnJvbS5wcm9kdWN0LnByb2R1Y3ROYW1lXCI7XHJcblxyXG4gICAgICAgICRyb290U2NvcGUuJHdhdGNoKCd1c2VyJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmICgkcm9vdFNjb3BlLnVzZXIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBnZXRSZW50aW5nc0J5UmVudGVyRnJvbVN1Y2Nlc3NmdWxsID0gZnVuY3Rpb24ocmVudGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUucmVudGluZ3NSZW50ZXJGcm9tID0gcmVudGluZztcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGdldFJlbnRpbmdzQnlSZW50ZXJGcm9tRXJyb3IgPSBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBSZW50aW5nU2VydmljZS5ieVJlbnRlckZyb20oJHJvb3RTY29wZS51c2VyLmlkKS50aGVuKGdldFJlbnRpbmdzQnlSZW50ZXJGcm9tU3VjY2Vzc2Z1bGwsIGdldFJlbnRpbmdzQnlSZW50ZXJGcm9tRXJyb3IpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBnZXRSZW50aW5nc0J5UmVudGVyVG9TdWNjZXNzZnVsbCA9IGZ1bmN0aW9uKHJlbnRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnJlbnRpbmdzUmVudGVyVG8gPSByZW50aW5nO1xyXG5cclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGdldFJlbnRpbmdzQnlSZW50ZXJUb0Vycm9yID0gZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgUmVudGluZ1NlcnZpY2UuYnlSZW50ZXJUbygkcm9vdFNjb3BlLnVzZXIuaWQpLnRoZW4oZ2V0UmVudGluZ3NCeVJlbnRlclRvU3VjY2Vzc2Z1bGwsIGdldFJlbnRpbmdzQnlSZW50ZXJUb0Vycm9yKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICRzY29wZS5vcGVuID0gZnVuY3Rpb24gKGlkLCBwcm9kdWN0LCB3aG8pIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbW9kYWxJbnN0YW5jZSA9ICR1aWJNb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uOiAkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnLi4vdGVtcGxhdGVzL215TW9kYWxDb250ZW50Lmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnTW9kYWxJbnN0YW5jZUN0cmwnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvZHVjdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aG86IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3aG87XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSgpKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBqb25haCBvbiAxMS8xNC8yMDE1LlxyXG4gKi9cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnc3dvcHByJylcclxuICAgICAgICAuY29udHJvbGxlcignTmF2YmFyQ3RybCcsIFsnJHNjb3BlJywgJyRsb2NhdGlvbicsIE5hdmJhckN0cmxdKTtcclxuXHJcbiAgICBmdW5jdGlvbiBOYXZiYXJDdHJsKCRzY29wZSwgJGxvY2F0aW9uKSB7XHJcbiAgICAgICAgLy9odHRwczovL2pzZmlkZGxlLm5ldC94djd0d3MxMC81L1xyXG4gICAgICAgICRzY29wZS5pc0NvbGxhcHNlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIC8vaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMjU5MjQ3Mi9ob3ctdG8taGlnaGxpZ2h0LWEtY3VycmVudC1tZW51LWl0ZW1cclxuICAgICAgICAkc2NvcGUuZ2V0Q2xhc3MgPSBmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgICAgICAgICBpZiAoJGxvY2F0aW9uLnBhdGgoKSA9PT0gcGF0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdhY3RpdmUnO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSgpKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBqb25haCBvbiAxMi80LzIwMTUuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdzd29wcHInKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdQbGFjZVByb2R1Y3RDdHJsJywgWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckbG9jYXRpb24nLCAnUHJvZHVjdFNlcnZpY2UnLCAndWlHbWFwR29vZ2xlTWFwQXBpJywgUGxhY2VQcm9kdWN0Q3RybF0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIFBsYWNlUHJvZHVjdEN0cmwgKCRyb290U2NvcGUsICRzY29wZSwgJGxvY2F0aW9uLCBQcm9kdWN0U2VydmljZSwgR29vZ2xlTWFwQXBpKSB7XHJcbiAgICAgICAgJHNjb3BlLmFsZXJ0cyA9IFtdO1xyXG5cclxuICAgICAgICAkc2NvcGUuY2xvc2VBbGVydCA9IGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgICAgICRzY29wZS5hbGVydHMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBHb29nbGVNYXBBcGkudGhlbihmdW5jdGlvbihtYXBzKSB7XHJcbiAgICAgICAgICAgIG1hcHMudmlzdWFsUmVmcmVzaCA9IHRydWU7XHJcbiAgICAgICAgICAgICRzY29wZS5kZWZhdWx0Qm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcyhcclxuICAgICAgICAgICAgICAgIG5ldyBnb29nbGUubWFwcy5MYXRMbmcoNTAuODI1MjM4MywgMy4yNDgxNTIxMCkpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICRzY29wZS5tYXAuYm91bmRzID0ge1xyXG4gICAgICAgICAgICAgICAgbm9ydGhlYXN0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF0aXR1ZGU6JHNjb3BlLmRlZmF1bHRCb3VuZHMuZ2V0Tm9ydGhFYXN0KCkubGF0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgbG9uZ2l0dWRlOiRzY29wZS5kZWZhdWx0Qm91bmRzLmdldE5vcnRoRWFzdCgpLmxuZygpXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc291dGh3ZXN0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF0aXR1ZGU6JHNjb3BlLmRlZmF1bHRCb3VuZHMuZ2V0U291dGhXZXN0KCkubGF0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgbG9uZ2l0dWRlOi0kc2NvcGUuZGVmYXVsdEJvdW5kcy5nZXRTb3V0aFdlc3QoKS5sbmcoKVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgJHNjb3BlLnNlYXJjaGJveC5vcHRpb25zLmJvdW5kcyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmdCb3VuZHMoJHNjb3BlLmRlZmF1bHRCb3VuZHMuZ2V0Tm9ydGhFYXN0KCksICRzY29wZS5kZWZhdWx0Qm91bmRzLmdldFNvdXRoV2VzdCgpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYW5ndWxhci5leHRlbmQoJHNjb3BlLCB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkOiB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTpmYWxzZVxyXG5cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZXVybDogJy4uL3RlbXBsYXRlcy93aW5kb3cuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZXBhcmFtZXRlcjoge31cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWFwOiB7XHJcbiAgICAgICAgICAgICAgICBjb250cm9sOiB7fSxcclxuICAgICAgICAgICAgICAgIGNlbnRlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhdGl0dWRlOiA1MS4wNTI1NjgsXHJcbiAgICAgICAgICAgICAgICAgICAgbG9uZ2l0dWRlOiAzLjE3MDEwNThcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB6b29tOiA5LFxyXG4gICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgYm91bmRzOiB7fSxcclxuICAgICAgICAgICAgICAgIG1hcmtlcnM6IFtdLFxyXG4gICAgICAgICAgICAgICAgaWRrZXk6ICdwbGFjZV9pZCcsXHJcbiAgICAgICAgICAgICAgICBldmVudHM6IHtcclxuICAgICAgICAgICAgICAgICAgICBpZGxlOiBmdW5jdGlvbiAobWFwKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZHJhZ2VuZDogZnVuY3Rpb24obWFwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdXBkYXRlIHRoZSBzZWFyY2ggYm94IGJvdW5kcyBhZnRlciBkcmFnZ2luZyB0aGUgbWFwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib3VuZHMgPSBtYXAuZ2V0Qm91bmRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZSA9IGJvdW5kcy5nZXROb3J0aEVhc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN3ID0gYm91bmRzLmdldFNvdXRoV2VzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2VhcmNoYm94Lm9wdGlvbnMuYm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcyhzdywgbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyRzY29wZS5zZWFyY2hib3gub3B0aW9ucy52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNlYXJjaGJveDoge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICcuLi90ZW1wbGF0ZXMvc2VhcmNoYm94Lmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGF1dG9jb21wbGV0ZTp0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGVzOiBbJ2dlb2NvZGUnXSxcclxuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRSZXN0cmljdGlvbnM6IHtjb3VudHJ5OiAnYmUnfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGV2ZW50czoge1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlX2NoYW5nZWQ6IGZ1bmN0aW9uIChhdXRvY29tcGxldGUpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBsYWNlID0gYXV0b2NvbXBsZXRlLmdldFBsYWNlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGxhY2UuYWRkcmVzc19jb21wb25lbnRzKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld01hcmtlcnMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib3VuZHMgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlciA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDpwbGFjZS5wbGFjZV9pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZV9pZDogcGxhY2UucGxhY2VfaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcGxhY2UuYWRkcmVzc19jb21wb25lbnRzWzBdLmxvbmdfbmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXRpdHVkZTogcGxhY2UuZ2VvbWV0cnkubG9jYXRpb24ubGF0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9uZ2l0dWRlOiBwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbi5sbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGU6ZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRldXJsOid3aW5kb3cudHBsLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlcGFyYW1ldGVyOiBwbGFjZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNYXJrZXJzLnB1c2gobWFya2VyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3VuZHMuZXh0ZW5kKHBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubWFwLmJvdW5kcyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3J0aGVhc3Q6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF0aXR1ZGU6IGJvdW5kcy5nZXROb3J0aEVhc3QoKS5sYXQoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9uZ2l0dWRlOiBib3VuZHMuZ2V0Tm9ydGhFYXN0KCkubG5nKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXRod2VzdDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXRpdHVkZTogYm91bmRzLmdldFNvdXRoV2VzdCgpLmxhdCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb25naXR1ZGU6IGJvdW5kcy5nZXRTb3V0aFdlc3QoKS5sbmcoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKG5ld01hcmtlcnMsIGZ1bmN0aW9uKG1hcmtlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXy5lYWNoKG5ld01hcmtlcnMsIGZ1bmN0aW9uKG1hcmtlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlci5jbG9zZUNsaWNrID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZC5vcHRpb25zLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VyLm9wdGlvbnMudmlzYmxlID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtYXJrZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VyLm9uQ2xpY2tlZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWQub3B0aW9ucy52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZCA9IG1hcmtlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkLm9wdGlvbnMudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5tYXAubWFya2VycyA9IG5ld01hcmtlcnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGxhY2UgPSAgcGxhY2UuZm9ybWF0dGVkX2FkZHJlc3M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc3VjY2Vzc0FkZFByb2R1Y3QocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLm9rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvZGV0YWlsUHJvZHVjdC9cIiArIHJlc3BvbnNlLmRhdGEub2suX2lkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hbGVydHMucHVzaCh7dHlwZTogJ2RhbmdlcicsIG1zZzogcmVzcG9uc2UuZGF0YS5lcnJvcn0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBlcnJvckFkZFByb2R1Y3QocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICRyb290U2NvcGUuJHdhdGNoKFwidXNlclwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKCRyb290U2NvcGUudXNlcikge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFkZFByb2R1Y3QgPSBmdW5jdGlvbihmaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgUHJvZHVjdFNlcnZpY2UuYWRkKGZpbGUsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiAkcm9vdFNjb3BlLnVzZXIuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3ROYW1lOiAkc2NvcGUucHJvZHVjdE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlUGVyRGF5OiAkc2NvcGUucHJpY2VQZXJEYXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAkc2NvcGUuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlOiAkc2NvcGUucGxhY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogJHNjb3BlLm1hcC5tYXJrZXJzWzBdLmxvbmdpdHVkZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF0aXR1ZGU6ICRzY29wZS5tYXAubWFya2Vyc1swXS5sYXRpdHVkZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oc3VjY2Vzc0FkZFByb2R1Y3QsIGVycm9yQWRkUHJvZHVjdCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS52YWxpZGF0ZSA9IGZ1bmN0aW9uKGZpZWxkKSB7XHJcblxyXG4gICAgICAgICAgICBpZigkc2NvcGUucGxhY2VQcm9kdWN0Rm9ybSlcclxuXHJcbiAgICAgICAgICAgIGlmIChmaWVsZCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBsYWNlUHJvZHVjdEZvcm0ucHJvZHVjdE5hbWUuJGRpcnR5ICYmICRzY29wZS5wbGFjZVByb2R1Y3RGb3JtLnByb2R1Y3ROYW1lLiRpbnZhbGlkKSByZXR1cm4gJ2hhcy1lcnJvcic7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBsYWNlUHJvZHVjdEZvcm0ucHJvZHVjdE5hbWUuJGRpcnR5ICYmICRzY29wZS5wbGFjZVByb2R1Y3RGb3JtLnByb2R1Y3ROYW1lLiR2YWxpZCkgcmV0dXJuIFwiaGFzLXN1Y2Nlc3NcIjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChmaWVsZCA9PSAyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBsYWNlUHJvZHVjdEZvcm0ucHJpY2VQZXJEYXkuJGRpcnR5ICYmICRzY29wZS5wbGFjZVByb2R1Y3RGb3JtLnByaWNlUGVyRGF5LiRpbnZhbGlkKSByZXR1cm4gJ2hhcy1lcnJvcic7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBsYWNlUHJvZHVjdEZvcm0ucHJpY2VQZXJEYXkuJGRpcnR5ICYmICRzY29wZS5wbGFjZVByb2R1Y3RGb3JtLnByaWNlUGVyRGF5LiR2YWxpZCkgcmV0dXJuIFwiaGFzLXN1Y2Nlc3NcIjtcclxuICAgICAgICAgICAgfSAgZWxzZSBpZiAoZmllbGQgPT0gMykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wbGFjZVByb2R1Y3RGb3JtLmRlc2NyaXB0aW9uLiRkaXJ0eSAmJiAkc2NvcGUucGxhY2VQcm9kdWN0Rm9ybS5kZXNjcmlwdGlvbi4kaW52YWxpZCkgcmV0dXJuICdoYXMtZXJyb3InO1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wbGFjZVByb2R1Y3RGb3JtLmRlc2NyaXB0aW9uLiRkaXJ0eSAmJiAkc2NvcGUucGxhY2VQcm9kdWN0Rm9ybS5kZXNjcmlwdGlvbi4kdmFsaWQpIHJldHVybiBcImhhcy1zdWNjZXNzXCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmllbGQgPT0gNCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wbGFjZVByb2R1Y3RGb3JtLnBpY3R1cmUuJGRpcnR5ICYmICRzY29wZS5wbGFjZVByb2R1Y3RGb3JtLnBpY3R1cmUuJGludmFsaWQpIHJldHVybiAnaGFzLWVycm9yJztcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucGxhY2VQcm9kdWN0Rm9ybS5waWN0dXJlLiRkaXJ0eSAmJiAkc2NvcGUucGxhY2VQcm9kdWN0Rm9ybS5waWN0dXJlLiR2YWxpZCkgcmV0dXJuIFwiaGFzLXN1Y2Nlc3NcIjtcclxuICAgICAgICAgICAgfSAgZWxzZSBpZiAoZmllbGQgPT0gNSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wbGFjZVByb2R1Y3RGb3JtLnBsYWNlLiR2YWxpZCkgcmV0dXJuIFwiaGFzLXN1Y2Nlc3NcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn0oKSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgam9uYWggb24gMTEvMjEvMjAxNS5cclxuICovXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnc3dvcHByJylcclxuICAgICAgICAuY29udHJvbGxlcignUmVnaXN0ZXJDdHJsJywgWyckcm9vdFNjb3BlJywgJyRzY29wZScsICdVc2VyU2VydmljZScsIFJlZ2lzdGVyQ3RybF0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIFJlZ2lzdGVyQ3RybCAoJHJvb3RTY29wZSwgJHNjb3BlLCBVc2VyU2VydmljZSkge1xyXG5cclxuICAgICAgICAkc2NvcGUuYWxlcnRzID0gW107XHJcblxyXG4gICAgICAgICRzY29wZS5jbG9zZUFsZXJ0ID0gZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmFsZXJ0cy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5yZWdpc3RlciA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gc3VjY2VzUmVnaXN0ZXIocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFsZXJ0cy5wdXNoKHt0eXBlOiAnZGFuZ2VyJywgbXNnOiByZXNwb25zZS5kYXRhLmVycm9yfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3NVc2VyRGF0YShkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS51c2VyID0gZGF0YTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBlcnJvclVzZXJEYXRhKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgVXNlclNlcnZpY2UudXNlckRhdGEoKS50aGVuKHN1Y2Nlc3NVc2VyRGF0YSwgZXJyb3JVc2VyRGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGVycm9yUmVnaXN0ZXIocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgVXNlclNlcnZpY2UucmVnaXN0ZXIoe1xyXG4gICAgICAgICAgICAgICAgZmlyc3RuYW1lOiB0aGlzLmZpcnN0bmFtZSxcclxuICAgICAgICAgICAgICAgIHN1cm5hbWU6IHRoaXMuc3VybmFtZSxcclxuICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLmVtYWlsLFxyXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmRcclxuICAgICAgICAgICAgfSkudGhlbihzdWNjZXNSZWdpc3RlciwgZXJyb3JSZWdpc3Rlcik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnZhbGlkYXRlID0gZnVuY3Rpb24oZmllbGQpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkID09IDEpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucmVnaXN0ZXJGb3JtLmZpcnN0bmFtZS4kZGlydHkgJiYgJHNjb3BlLnJlZ2lzdGVyRm9ybS5maXJzdG5hbWUuJGludmFsaWQpIHJldHVybiAnaGFzLWVycm9yJztcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucmVnaXN0ZXJGb3JtLmZpcnN0bmFtZS4kZGlydHkgJiYgJHNjb3BlLnJlZ2lzdGVyRm9ybS5maXJzdG5hbWUuJHZhbGlkKSByZXR1cm4gXCJoYXMtc3VjY2Vzc1wiO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGZpZWxkID09IDIpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucmVnaXN0ZXJGb3JtLnN1cm5hbWUuJGRpcnR5ICYmICRzY29wZS5yZWdpc3RlckZvcm0uc3VybmFtZS4kaW52YWxpZCkgcmV0dXJuICdoYXMtZXJyb3InO1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5yZWdpc3RlckZvcm0uc3VybmFtZS4kZGlydHkgJiYgJHNjb3BlLnJlZ2lzdGVyRm9ybS5zdXJuYW1lLiR2YWxpZCkgcmV0dXJuIFwiaGFzLXN1Y2Nlc3NcIjtcclxuICAgICAgICAgICAgfSAgZWxzZSBpZiAoZmllbGQgPT0gMykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5yZWdpc3RlckZvcm0uZW1haWwuJGRpcnR5ICYmICRzY29wZS5yZWdpc3RlckZvcm0uZW1haWwuJGludmFsaWQpIHJldHVybiAnaGFzLWVycm9yJztcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucmVnaXN0ZXJGb3JtLmVtYWlsLiRkaXJ0eSAmJiAkc2NvcGUucmVnaXN0ZXJGb3JtLmVtYWlsLiR2YWxpZCkgcmV0dXJuIFwiaGFzLXN1Y2Nlc3NcIjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChmaWVsZCA9PSA0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnJlZ2lzdGVyRm9ybS5wYXNzd29yZC4kZGlydHkgJiYgJHNjb3BlLnJlZ2lzdGVyRm9ybS5wYXNzd29yZC4kaW52YWxpZCkgcmV0dXJuICdoYXMtZXJyb3InO1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5yZWdpc3RlckZvcm0ucGFzc3dvcmQuJGRpcnR5ICYmICRzY29wZS5yZWdpc3RlckZvcm0ucGFzc3dvcmQuJHZhbGlkKSByZXR1cm4gXCJoYXMtc3VjY2Vzc1wiO1xyXG4gICAgICAgICAgICB9ICBlbHNlIGlmIChmaWVsZCA9PSA1KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnJlZ2lzdGVyRm9ybS5wYXNzd29yZEFnYWluLiRkaXJ0eSAmJiAkc2NvcGUucmVnaXN0ZXJGb3JtLnBhc3N3b3JkQWdhaW4uJGludmFsaWQpIHJldHVybiAnaGFzLWVycm9yJztcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucmVnaXN0ZXJGb3JtLnBhc3N3b3JkQWdhaW4uJGRpcnR5ICYmICRzY29wZS5yZWdpc3RlckZvcm0ucGFzc3dvcmRBZ2Fpbi4kdmFsaWQpIHJldHVybiBcImhhcy1zdWNjZXNzXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59KCkpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGpvbmFoIG9uIDEyLzE5LzIwMTUuXHJcbiAqL1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ3N3b3BwcicpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1JlbnRQcm9kdWN0Q3RybCcsIFsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHJvdXRlUGFyYW1zJywgJyRsb2NhdGlvbicsICdQcm9kdWN0U2VydmljZScsICdSZW50aW5nU2VydmljZScsIFJlbnRQcm9kdWN0Q3RybF0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIFJlbnRQcm9kdWN0Q3RybCgkcm9vdFNjb3BlLCAkc2NvcGUsICRyb3V0ZVBhcmFtcywgJGxvY2F0aW9uLCBQcm9kdWN0U2VydmljZSwgUmVudGluZ1NlcnZpY2UpIHtcclxuXHJcbiAgICAgICAgJHNjb3BlLmFsZXJ0cyA9IFtdO1xyXG5cclxuICAgICAgICAkc2NvcGUuY2xvc2VBbGVydCA9IGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgICAgICRzY29wZS5hbGVydHMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUudXNlciA9IFtdO1xyXG5cclxuICAgICAgICB2YXIgcHJvZHVjdElkID0gJHJvdXRlUGFyYW1zLmlkO1xyXG4gICAgICAgIHZhciBvbkdldFVzZXJXaXRoUHJvZHVjdFN1Y2Nlc2Z1bGwgPSBmdW5jdGlvbihkYXRhKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoJHJvb3RTY29wZS51c2VyLmlkID09IGRhdGEuaWQpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5vd25Qcm9kdWN0ID0gcHJvZHVjdElkO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEucHJvZHVjdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEucHJvZHVjdC5pc0RlbGV0ZWQgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXNlciA9IFwiZGVsZXRlZFwiO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXNlciA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudXNlciA9IGRhdGE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgb25HZXRVc2VyV2l0aFByb2R1Y3RFcnJvciA9IGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIFByb2R1Y3RTZXJ2aWNlLmJ5SWRVc2VyKHByb2R1Y3RJZCkudGhlbihvbkdldFVzZXJXaXRoUHJvZHVjdFN1Y2Nlc2Z1bGwsIG9uR2V0VXNlcldpdGhQcm9kdWN0RXJyb3IpO1xyXG5cclxuICAgICAgICAkc2NvcGUuc2V0RGF0ZXMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmR0MSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgICRzY29wZS5kdDIgPSBuZXcgRGF0ZSgkc2NvcGUuZHQxLmdldERhdGUoKSArMSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNldERhdGVzKCk7XHJcblxyXG4gICAgICAgICRzY29wZS4kd2F0Y2goJ2R0MScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuc2V0TWluRGF0ZXMoKTtcclxuXHJcbiAgICAgICAgICAgIGlmKCRzY29wZS5kdDEgPj0gJHNjb3BlLmR0Mikge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmR0MiA9IG5ldyBEYXRlKCRzY29wZS5kdDEpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmR0Mi5zZXREYXRlKCRzY29wZS5kdDIuZ2V0RGF0ZSgpICsxKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmR0MS5zdGF0dXMgPSB7XHJcbiAgICAgICAgICAgICAgICBvcGVuZWQ6IGZhbHNlXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuZHQxLm9wZW4gPSBmdW5jdGlvbigkZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5kdDEuc3RhdHVzLm9wZW5lZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuc2V0RGF5c1RvUmVudCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkc2NvcGUuJHdhdGNoKCdkdDInLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnNldE1pbkRhdGVzKCk7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuZHQyLm9wZW4gPSBmdW5jdGlvbigkZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5kdDIuc3RhdHVzLm9wZW5lZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuZHQyLnN0YXR1cyA9IHtcclxuICAgICAgICAgICAgICAgIG9wZW5lZDogZmFsc2VcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5zZXREYXlzVG9SZW50KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS5zZXRNaW5EYXRlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuZHQxLm1pbkRhdGUgPSBuZXcgRGF0ZSgpO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmR0Mi5taW5EYXRlID0gbmV3IERhdGUoJHNjb3BlLmR0MSk7XHJcbiAgICAgICAgICAgICRzY29wZS5kdDIubWluRGF0ZS5zZXREYXRlKCRzY29wZS5kdDIubWluRGF0ZS5nZXREYXRlKCkgKzEpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5kYXRlT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgZm9ybWF0WWVhcjogJ3l5JyxcclxuICAgICAgICAgICAgc3RhcnRpbmdEYXk6IDFcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZm9ybWF0ID0gJ2RkL01NL3l5eXknO1xyXG5cclxuICAgICAgICAkc2NvcGUuJHdhdGNoKCd1c2VyJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5zZXREYXlzVG9SZW50KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS5zZXREYXlzVG9SZW50ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBvbmVEYXkgPSAyNCo2MCo2MCoxMDAwO1xyXG4gICAgICAgICAgICAkc2NvcGUuZGF5c1RvUmVudCA9IE1hdGgucm91bmQoTWF0aC5hYnMoKCRzY29wZS5kdDEuZ2V0VGltZSgpIC0gJHNjb3BlLmR0Mi5nZXRUaW1lKCkpLyhvbmVEYXkpKSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoJHNjb3BlLnVzZXIucHJvZHVjdCkgJHNjb3BlLnRvdGFsUHJpY2UgPSAkc2NvcGUudXNlci5wcm9kdWN0LnByaWNlUGVyRGF5ICogJHNjb3BlLmRheXNUb1JlbnQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIG9uQWRkUmVudGluZ1N1Y2Nlc3NmdWxsID0gZnVuY3Rpb24ocmVzcCkge1xyXG4gICAgICAgICAgICBpZiAocmVzcC5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcC5kYXRhLm9rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9kZXRhaWxSZW50aW5nLycgKyByZXNwLmRhdGEub2suX2lkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChyZXNwLmRhdGEuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWxlcnRzLnB1c2goe3R5cGU6ICdkYW5nZXInLCBtc2c6IHJlc3AuZGF0YS5lcnJvcn0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIG9uQWRkUmVudGluZ0Vycm9yID0gZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnJlbnRQcm9kdWN0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmICgkcm9vdFNjb3BlLnVzZXIgJiYgJHNjb3BlLnVzZXIpIHtcclxuICAgICAgICAgICAgICAgIHZhciByZW50aW5nID0gbmV3IFJlbnRpbmcoKTtcclxuICAgICAgICAgICAgICAgIHJlbnRpbmcucmVudGVyRnJvbSA9ICRzY29wZS51c2VyLmlkO1xyXG4gICAgICAgICAgICAgICAgcmVudGluZy5yZW50ZXJUbyA9ICRyb290U2NvcGUudXNlci5pZDtcclxuICAgICAgICAgICAgICAgIHJlbnRpbmcucHJvZHVjdElkID0gJHNjb3BlLnVzZXIucHJvZHVjdC5pZDtcclxuICAgICAgICAgICAgICAgIHJlbnRpbmcuZnJvbURhdGUgPSAkc2NvcGUuZHQxO1xyXG4gICAgICAgICAgICAgICAgcmVudGluZy50b0RhdGUgPSAkc2NvcGUuZHQyO1xyXG4gICAgICAgICAgICAgICAgcmVudGluZy5kYXlzVG9SZW50ID0gJHNjb3BlLmRheXNUb1JlbnQ7XHJcbiAgICAgICAgICAgICAgICByZW50aW5nLnRvdGFsUHJpY2UgPSAkc2NvcGUudG90YWxQcmljZTtcclxuXHJcbiAgICAgICAgICAgICAgICBSZW50aW5nU2VydmljZS5hZGQocmVudGluZykudGhlbihvbkFkZFJlbnRpbmdTdWNjZXNzZnVsbCwgb25BZGRSZW50aW5nRXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSgpKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBqb25haCBvbiAxMi8xMi8yMDE1LlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnc3dvcHByJylcclxuICAgICAgICAuY29udHJvbGxlcignVG9SZW50Q3RybCcsIFsnJHNjb3BlJywgJ1Byb2R1Y3RTZXJ2aWNlJywgVG9SZW50Q3RybF0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIFRvUmVudEN0cmwoJHNjb3BlLCBQcm9kdWN0U2VydmljZSkge1xyXG4gICAgICAgICRzY29wZS5zb3J0UHJvcGVydHkgPSBcInByaWNlUGVyRGF5XCI7XHJcblxyXG4gICAgICAgIHZhciBvbkdldFByb2R1Y3RzU3VjY2VzZnVsbCA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5wcm9kdWN0cyA9IHJlc3BvbnNlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBvbkdldFByb2R1Y3RzRXJyb3IgPSBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBQcm9kdWN0U2VydmljZS5hbGwoKS50aGVuKG9uR2V0UHJvZHVjdHNTdWNjZXNmdWxsLCBvbkdldFByb2R1Y3RzRXJyb3IpO1xyXG4gICAgfVxyXG59KCkpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGpvbmFoIG9uIDEyLzEyLzIwMTUuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdzd29wcHInKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdXaW5kb3dDdHJsJywgWyckc2NvcGUnLCBXaW5kb3dDdHJsXSk7XHJcblxyXG4gICAgZnVuY3Rpb24gV2luZG93Q3RybCgkc2NvcGUpIHtcclxuICAgICAgICAkc2NvcGUucGxhY2UgPSB7fTtcclxuICAgICAgICAkc2NvcGUuc2hvd1BsYWNlRGV0YWlscyA9IGZ1bmN0aW9uKHBhcmFtKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5wbGFjZSA9IHBhcmFtO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn0oKSk7IiwiLy9EZXplIG1vZHVsZSBhYW5nZXBhc3QgbmFhciBlaWdlbiB3ZW5zOiBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9hbmd1bGFyLXNjcm9sbC1hbmltYXRlXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FuZ3VsYXItc2Nyb2xsLWFuaW1hdGUnLCBbXSkuZGlyZWN0aXZlKCd3aGVuVmlzaWJsZScsIFsnJGRvY3VtZW50JywgJyR3aW5kb3cnLFxyXG4gICAgICAgIGZ1bmN0aW9uKCRkb2N1bWVudCwgJHdpbmRvdykge1xyXG5cclxuICAgICAgICAgICAgdmFyIGRldGVybWluZVdoZXJlRWxlbWVudElzSW5WaWV3cG9ydCA9XHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbigkZWwsIHZpZXdwb3J0SGVpZ2h0LCB3aGVuVmlzaWJsZUZuLCBkZWxheVBlcmNlbnQsIHNjb3BlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50Qm91bmRzID0gJGVsWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL3ZhciBwYW5lbFRvcCA9IGVsZW1lbnRCb3VuZHMudG9wO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYW5lbEJvdHRvbSA9IGVsZW1lbnRCb3VuZHMuYm90dG9tO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBwaXhlbCBidWZmZXIgdW50aWwgZGVjaWRpbmcgdG8gc2hvdyB0aGUgZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWxheVB4ID0gZGVsYXlQZXJjZW50ICogZWxlbWVudEJvdW5kcy5oZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBib3R0b21WaXNpYmxlID0gKHBhbmVsQm90dG9tIC0gZGVsYXlQeCA+IDApICYmIChwYW5lbEJvdHRvbSA8IHZpZXdwb3J0SGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAvL3ZhciB0b3BWaXNpYmxlID0gKHBhbmVsVG9wICsgZGVsYXlQeCA8PSB2aWV3cG9ydEhlaWdodCkgJiYgKHBhbmVsVG9wID4gMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkZWwuZGF0YSgnaGlkZGVuJykgJiYgYm90dG9tVmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVuVmlzaWJsZUZuKCRlbCwgc2NvcGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkZWwuZGF0YSgnaGlkZGVuJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyovLyBzY3JvbGxlZCBvdXQgZnJvbSBzY3JvbGxpbmcgZG93biBvciB1cFxyXG4gICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghKCRlbC5kYXRhKCdoaWRkZW4nKSkgJiYgKHBhbmVsQm90dG9tIDwgMCB8fCBwYW5lbFRvcCA+IHZpZXdwb3J0SGVpZ2h0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICB3aGVuTm90VmlzaWJsZUZuKCRlbCwgc2NvcGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAkZWwuZGF0YSgnaGlkZGVuJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgIH0qL1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVuVmlzaWJsZTogJyYnLFxyXG4gICAgICAgICAgICAgICAgICAgIGRlbGF5UGVyY2VudDogJz0/J1xyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBbJyRzY29wZScsIGZ1bmN0aW9uKHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzY29wZS53aGVuVmlzaWJsZSB8fCAhYW5ndWxhci5pc0Z1bmN0aW9uKHNjb3BlLndoZW5WaXNpYmxlKCkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRGlyZWN0aXZlOiBhbmd1bGFyLXNjcm9sbC1hbmltYXRlIFxcJ3doZW4tdmlzaWJsZVxcJyBhdHRyaWJ1dGUgbXVzdCBzcGVjaWZ5IGEgZnVuY3Rpb24uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKmlmIChzY29wZS53aGVuTm90VmlzaWJsZSAmJiAhYW5ndWxhci5pc0Z1bmN0aW9uKHNjb3BlLndoZW5Ob3RWaXNpYmxlKCkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRGlyZWN0aXZlOiBhbmd1bGFyLXNjcm9sbC1hbmltYXRlIFxcJ3doZW4tbm90LXZpc2libGVcXCcgYXR0cmlidXRlIG11c3Qgc3BlY2lmeSBhIGZ1bmN0aW9uLicpO1xyXG4gICAgICAgICAgICAgICAgICAgICB9Ki9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNjb3BlLmRlbGF5UGVyY2VudCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbGF5UGVyY2VudCA9IHBhcnNlRmxvYXQoc2NvcGUuZGVsYXlQZXJjZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoTnVtYmVyLmlzTmFOKGRlbGF5UGVyY2VudCkpIHx8IChkZWxheVBlcmNlbnQgPCAwIHx8IGRlbGF5UGVyY2VudCA+IDEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RpcmVjdGl2ZTogYW5ndWxhci1zY3JvbGwtYW5pbWF0ZSBcXCdkZWxheS1wZXJjZW50XFwnIGF0dHJpYnV0ZSBtdXN0IGJlIGEgZGVjaW1hbCBmcmFjdGlvbiBiZXR3ZWVuIDAgYW5kIDEuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XSxcclxuXHJcbiAgICAgICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWwsIGF0dHJpYnV0ZXMpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlbGF5UGVyY2VudCA9IGF0dHJpYnV0ZXMuZGVsYXlQZXJjZW50IHx8IDAuMjU7IC8vIGxvd2VyID0gbW9yZSBlYWdlciB0byBoaWRlIC8gc2hvdywgaGlnaGVyID0gbGVzcyBlYWdlclxyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgb25TY3JvbGwgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkb2N1bWVudCA9ICRkb2N1bWVudFswXS5kb2N1bWVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2aWV3cG9ydEhlaWdodCA9IGRvY3VtZW50LmNsaWVudEhlaWdodDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGVybWluZVdoZXJlRWxlbWVudElzSW5WaWV3cG9ydChlbCwgdmlld3BvcnRIZWlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS53aGVuVmlzaWJsZSgpLCBkZWxheVBlcmNlbnQsIHNjb3BlKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgdW5iaW5kRG9jdW1lbnRFdmVudHMgPSAkZG9jdW1lbnQub24oJ3Njcm9sbCcsIG9uU2Nyb2xsKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdW5iaW5kV2luZG93RXZlbnRzID0gYW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLm9uKCdyZXNpemUgb3JpZW50YXRpb25jaGFuZ2UnLCBvblNjcm9sbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qc2NvcGUuJG9uKCckZGVzdHJveScsIHVuYmluZERvY3VtZW50RXZlbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIHVuYmluZFdpbmRvd0V2ZW50cyk7Ki9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaW5pdGlhbGlzZVxyXG4gICAgICAgICAgICAgICAgICAgIGVsLmRhdGEoJ2hpZGRlbicsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRldmFsQXN5bmMob25TY3JvbGwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1dKTtcclxuXHJcbn0oKSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgam9uYWggb24gMTEvMjgvMjAxNS5cclxuICovXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnc3dvcHByJylcclxuICAgICAgICAuZGlyZWN0aXZlKCdjb21wYXJlVG8nLCBjb21wYXJlVG9EaXIpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbXBhcmVUb0RpciAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVxdWlyZTogXCJuZ01vZGVsXCIsXHJcbiAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICBvdGhlck1vZGVsVmFsdWU6IFwiPWNvbXBhcmVUb1wiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyaWJ1dGVzLCBuZ01vZGVsKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgbmdNb2RlbC4kdmFsaWRhdG9ycy5jb21wYXJlVG8gPSBmdW5jdGlvbihtb2RlbFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1vZGVsVmFsdWUgPT0gc2NvcGUub3RoZXJNb2RlbFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHNjb3BlLiR3YXRjaChcIm90aGVyTW9kZWxWYWx1ZVwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZ01vZGVsLiR2YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59KCkpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGpvbmFoIG9uIDExLzIxLzIwMTUuXHJcbiAqL1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ3N3b3BwcicpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgnbG9nb3V0JywgWyckcm9vdFNjb3BlJywgJ1VzZXJTZXJ2aWNlJywgbG9nb3V0RGlyXSk7XHJcblxyXG4gICAgZnVuY3Rpb24gbG9nb3V0RGlyICgkcm9vdFNjb3BlLCBVc2VyU2VydmljZSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50Lm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3NMb2dvdXQocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS51c2VyID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGVycm9yTG9nb3V0KHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFVzZXJTZXJ2aWNlLmxvZ291dCgpLnRoZW4oc3VjY2Vzc0xvZ291dCwgZXJyb3JMb2dvdXQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59KCkpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGpvbmFoIG9uIDEyLzE4LzIwMTUuXHJcbiAqL1xyXG4oZnVuY3Rpb24oKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZShcInN3b3BwclwiKVxyXG4gICAgICAgIC5kaXJlY3RpdmUoXCJwcm9kdWN0Zm9ycmVudFwiLCBwcm9kdWN0RGlyKTtcclxuXHJcbiAgICBmdW5jdGlvbiBwcm9kdWN0RGlyKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnLi4vdGVtcGxhdGVzL3Byb2R1Y3QuaHRtbCdcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGpvbmFoIG9uIDExLzIxLzIwMTUuXHJcbiAqL1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ3N3b3BwcicpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgncmVkaXInLCByZWRpckRpcik7XHJcblxyXG4gICAgZnVuY3Rpb24gcmVkaXJEaXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50Lm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gYXR0cnMuaHJlZjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSgpKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBqb25haCBvbiAxMi85LzIwMTUuXHJcbiAqL1xyXG4oZnVuY3Rpb24oKSB7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnaHR0cEZhY3RvcnknLCBbXSlcclxuICAgICAgICAuZmFjdG9yeSgnbXlIdHRwUmVzcG9uc2VJbnRlcmNlcHRvcicsWyckcScsJyRsb2NhdGlvbicsZnVuY3Rpb24oJHEsJGxvY2F0aW9uKXtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlOiBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzcG9uc2UuZGF0YSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEucmVkaXJlY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKHJlc3BvbnNlLmRhdGEucmVkaXJlY3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHt9IHx8ICRxLndoZW4ocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZSB8fCAkcS53aGVuKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XSlcclxuICAgICAgICAuY29uZmlnKFsnJGh0dHBQcm92aWRlcicsIGZ1bmN0aW9uKCRodHRwUHJvdmlkZXIpIHtcclxuICAgICAgICAgICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgnbXlIdHRwUmVzcG9uc2VJbnRlcmNlcHRvcicpO1xyXG4gICAgICAgIH1dKTtcclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBqb25haCBvbiAxMi8yNC8yMDE1LlxyXG4gKi9cclxuKGZ1bmN0aW9uKCl7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICB2YXIgTWVzc2FnZVNlcnZpY2UgPSBmdW5jdGlvbigkaHR0cCkge1xyXG5cclxuICAgICAgICB2YXIgZ2V0TWVzc2FnZXMgPSBmdW5jdGlvbihyZW50aW5nSWQpIHtcclxuICAgICAgICAgICAgdmFyIHVybCA9ICcvYXBpL2NoYXQvJyArIHJlbnRpbmdJZDtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZXJyb3JcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChyZXNwb25zZS5kYXRhLm9rLCBmdW5jdGlvbihtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1zZyA9IG5ldyBNZXNzYWdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtLl9yZW50aW5nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtLl9zZW5kZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG0ubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbS5jb250ZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtLmNyZWF0ZWRPblxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXMucHVzaChtc2cpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2VzO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgYWRkTWVzc2FnZSA9IGZ1bmN0aW9uKG1lc3NhZ2UsIHJlbnRpbmdJZCkge1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gJy9hcGkvY2hhdC8nICsgcmVudGluZ0lkO1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCh1cmwsIG1lc3NhZ2UpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZXJyb3JcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbSA9IHJlc3BvbnNlLmRhdGEub2s7XHJcbiAgICAgICAgICAgICAgICB2YXIgbXNnID0gbmV3IE1lc3NhZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAgbS5fcmVudGluZyxcclxuICAgICAgICAgICAgICAgICAgICBtLl9zZW5kZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgbS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIG0uY29udGVudCxcclxuICAgICAgICAgICAgICAgICAgICBtLmNyZWF0ZWRPblxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbXNnO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBnZXRNZXNzYWdlczogZ2V0TWVzc2FnZXMsXHJcbiAgICAgICAgICAgIGFkZE1lc3NhZ2UgOiBhZGRNZXNzYWdlXHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICBhbmd1bGFyLm1vZHVsZShcInN3b3BwclwiKS5mYWN0b3J5KFwiQ2hhdFNlcnZpY2VcIiwgW1wiJGh0dHBcIiwgTWVzc2FnZVNlcnZpY2VdKTtcclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBHcmVnIG9uIDI0LU5vdi0xNS5cclxuICovXHJcbihmdW5jdGlvbigpe1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICB2YXIgUHJvZHVjdFNlcnZpY2UgPSBmdW5jdGlvbigkaHR0cCwgVXBsb2FkKSB7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG1ha2VQcm9kdWN0KHApIHtcclxuICAgICAgICAgICAgdmFyIHVybCA9IHAudXJsID8gcC51cmwgOiAnLyc7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb2R1Y3QoXHJcbiAgICAgICAgICAgICAgICBwLl9pZCxcclxuICAgICAgICAgICAgICAgIHAucHJvZHVjdE5hbWUsXHJcbiAgICAgICAgICAgICAgICBwLnByaWNlUGVyRGF5LFxyXG4gICAgICAgICAgICAgICAgcC5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgIHVybCxcclxuICAgICAgICAgICAgICAgIHAucHVibGljaWQsXHJcbiAgICAgICAgICAgICAgICBwLnBsYWNlLFxyXG4gICAgICAgICAgICAgICAgcC5sb25naXR1ZGUsXHJcbiAgICAgICAgICAgICAgICBwLmxhdGl0dWRlLFxyXG4gICAgICAgICAgICAgICAgcC5pc0RlbGV0ZWRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBieUlkID0gZnVuY3Rpb24oaWQpe1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gICAnL2FwaS9wcm9kdWN0L2dldEJ5SWQvJytpZDtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJlcnJvclwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBwID0gcmVzcG9uc2UuZGF0YS5vaztcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvZHVjdChcclxuICAgICAgICAgICAgICAgICAgICBwLnByb2R1Y3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIHAucHJpY2VQZXJEYXksXHJcbiAgICAgICAgICAgICAgICAgICAgcC5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBwLmNyZWF0ZWRPblxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGJ5SWRVc2VyID0gZnVuY3Rpb24ocHJvZHVjdElkKXtcclxuICAgICAgICAgICAgdmFyIHVybCA9ICcvYXBpL3Byb2R1Y3QvZ2V0QnlJZFVzZXIvJyArIHByb2R1Y3RJZDtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihyZXNwb25zZS5kYXRhLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZXJyb3JcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcCA9IHJlc3BvbnNlLmRhdGEub2sucHJvZHVjdDtcclxuICAgICAgICAgICAgICAgIHZhciBwcm9kdWN0ID0gbWFrZVByb2R1Y3QocCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHUgPSByZXNwb25zZS5kYXRhLm9rO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBVc2VyV2l0aG91dENyZWRlbnRpYWxzKFxyXG4gICAgICAgICAgICAgICAgICAgIHUuX2lkLFxyXG4gICAgICAgICAgICAgICAgICAgIHUuZmlyc3RuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIHUuc3VybmFtZSxcclxuICAgICAgICAgICAgICAgICAgICB1LmxvY2FsLmVtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3RcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBhbGwgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gJy9hcGkvcHJvZHVjdC9nZXRBbGwvJztcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJlcnJvclwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBwcm9kdWN0cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHJlc3BvbnNlLmRhdGEub2ssIGZ1bmN0aW9uKHApe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwLmlzRGVsZXRlZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb2R1Y3QgPSBtYWtlUHJvZHVjdChwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdHMucHVzaChwcm9kdWN0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwcm9kdWN0cztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGFkZCA9IGZ1bmN0aW9uKGZpbGUsIGRhdGEpIHtcclxuICAgICAgICAgICAgdmFyIHVybCA9ICcvYXBpL3Byb2R1Y3QvbmV3UHJvZHVjdC8nO1xyXG4gICAgICAgICAgICBpZiAoZmlsZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHVwbG9hZGVyID0gZmlsZS51cGxvYWQgPSBVcGxvYWQudXBsb2FkKHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgICAgICAgICBmaWxlOiBmaWxlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1cGxvYWRlcjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KHVybCwgZGF0YSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGVkaXQgPSBmdW5jdGlvbihmaWxlLCBkYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSAnL2FwaS9wcm9kdWN0L2VkaXRQcm9kdWN0Lyc7XHJcbiAgICAgICAgICAgIGlmIChmaWxlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXBsb2FkZXIgPSBmaWxlLnVwbG9hZCA9IFVwbG9hZC51cGxvYWQoe1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGU6IGZpbGUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YVxyXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwbG9hZGVyO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QodXJsLCBkYXRhKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgcmVtb3ZlID0gZnVuY3Rpb24oaWQpe1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gICcvYXBpL3Byb2R1Y3QvcmVtb3ZlQnlJZC8nK2lkO1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBieUlkIDogYnlJZCxcclxuICAgICAgICAgICAgYnlJZFVzZXIgOiBieUlkVXNlcixcclxuICAgICAgICAgICAgYWxsIDogYWxsLFxyXG4gICAgICAgICAgICBhZGQgOiBhZGQsXHJcbiAgICAgICAgICAgIGVkaXQgOiBlZGl0LFxyXG4gICAgICAgICAgICByZW1vdmUgOiByZW1vdmVcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIGFuZ3VsYXIubW9kdWxlKFwic3dvcHByXCIpLmZhY3RvcnkoXCJQcm9kdWN0U2VydmljZVwiLCBbXCIkaHR0cFwiLCBcIlVwbG9hZFwiLCBQcm9kdWN0U2VydmljZV0pO1xyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEdyZWcgb24gMjQtTm92LTE1LlxyXG4gKi9cclxuKGZ1bmN0aW9uKCl7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICB2YXIgUmVudGluZ1NlcnZpY2UgPSBmdW5jdGlvbigkaHR0cCl7XHJcbiAgICAgICAgZnVuY3Rpb24gbWFrZVByb2R1Y3QocCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb2R1Y3QoXHJcbiAgICAgICAgICAgICAgICBwLl9pZCxcclxuICAgICAgICAgICAgICAgIHAucHJvZHVjdE5hbWUsXHJcbiAgICAgICAgICAgICAgICBwYXJzZUludChwLnByaWNlUGVyRGF5KSxcclxuICAgICAgICAgICAgICAgIHAuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICBwLnVybCxcclxuICAgICAgICAgICAgICAgIHAucHVibGljaWQsXHJcbiAgICAgICAgICAgICAgICBwLnBsYWNlLFxyXG4gICAgICAgICAgICAgICAgcC5sb25naXR1ZGUsXHJcbiAgICAgICAgICAgICAgICBwLmxhdGl0dWRlLFxyXG4gICAgICAgICAgICAgICAgcC5pc0RlbGV0ZWRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG1ha2VSZW50ZXJGcm9tKHJmLCBwcm9kdWN0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVXNlcldpdGhvdXRDcmVkZW50aWFscyhcclxuICAgICAgICAgICAgICAgIHJmLl9pZCxcclxuICAgICAgICAgICAgICAgIHJmLmZpcnN0bmFtZSxcclxuICAgICAgICAgICAgICAgIHJmLnN1cm5hbWUsXHJcbiAgICAgICAgICAgICAgICByZi5sb2NhbC5lbWFpbCxcclxuICAgICAgICAgICAgICAgIHByb2R1Y3RcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG1ha2VSZW50ZXJUbyhydCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFVzZXJXaXRob3V0Q3JlZGVudGlhbHMoXHJcbiAgICAgICAgICAgICAgICBydC5faWQsXHJcbiAgICAgICAgICAgICAgICBydC5maXJzdG5hbWUsXHJcbiAgICAgICAgICAgICAgICBydC5zdXJuYW1lLFxyXG4gICAgICAgICAgICAgICAgcnQubG9jYWwuZW1haWxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG1ha2VSZW50aW5nKHIsIHJlbnRlckZyb20sIHJlbnRlclRvKSB7XHJcbiAgICAgICAgICAgcmV0dXJuIG5ldyBSZW50aW5nV2l0aFVzZXJzIChcclxuICAgICAgICAgICAgICAgIHIuX2lkLFxyXG4gICAgICAgICAgICAgICAgcmVudGVyRnJvbSxcclxuICAgICAgICAgICAgICAgIHJlbnRlclRvLFxyXG4gICAgICAgICAgICAgICAgbmV3IERhdGUoci5mcm9tRGF0ZSksXHJcbiAgICAgICAgICAgICAgICBuZXcgRGF0ZShyLnRvRGF0ZSksXHJcbiAgICAgICAgICAgICAgICBwYXJzZUludChyLmRheXNUb1JlbnQpLFxyXG4gICAgICAgICAgICAgICAgcGFyc2VJbnQoci50b3RhbFByaWNlKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGJ5SWQgPSBmdW5jdGlvbihpZCl7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSAnL2FwaS9yZW50aW5nL2dldEJ5SWQvJytpZDtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihyZXNwb25zZS5kYXRhLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZXJyb3JcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGEub2s7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHAgPSBkYXRhLnJlbnRlckZyb20ucHJvZHVjdDtcclxuICAgICAgICAgICAgICAgIHZhciBwcm9kdWN0ID0gbWFrZVByb2R1Y3QocCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHJmID0gZGF0YS5yZW50ZXJGcm9tO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlbnRlckZyb20gPSBtYWtlUmVudGVyRnJvbShyZiwgcHJvZHVjdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHJ0ID0gZGF0YS5yZW50ZXJUbztcclxuICAgICAgICAgICAgICAgIHZhciByZW50ZXJUbyA9IG1ha2VSZW50ZXJUbyhydCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHIgPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1ha2VSZW50aW5nKHIsIHJlbnRlckZyb20sIHJlbnRlclRvKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGJ5UmVudGVyRnJvbSA9IGZ1bmN0aW9uKHVzZXJJZCkge1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gICAnL2FwaS9yZW50aW5nL2dldEFsbFJlbnRpbmdzUmVudGVyRnJvbS8nK3VzZXJJZDtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJlcnJvclwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciByZW50aW5ncyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHJlc3BvbnNlLmRhdGEub2ssIGZ1bmN0aW9uKHIpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwID0gci5yZW50ZXJGcm9tLnByb2R1Y3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb2R1Y3QgPSBtYWtlUHJvZHVjdChwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJmID0gci5yZW50ZXJGcm9tO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZW50ZXJGcm9tID0gbWFrZVJlbnRlckZyb20ocmYsIHByb2R1Y3QpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgcnQgPSByLnJlbnRlclRvO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZW50ZXJUbyA9IG1ha2VSZW50ZXJUbyhydCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVudGluZ3MucHVzaChtYWtlUmVudGluZyhyLCByZW50ZXJGcm9tLCByZW50ZXJUbykpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVudGluZ3M7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBieVJlbnRlclRvID0gZnVuY3Rpb24odXNlcklkKXtcclxuICAgICAgICAgICAgdmFyIHVybCA9ICAgJy9hcGkvcmVudGluZy9nZXRBbGxSZW50aW5nc1JlbnRlclRvLycrdXNlcklkO1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImVycm9yXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHJlbnRpbmdzID0gW107XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gocmVzcG9uc2UuZGF0YS5vaywgZnVuY3Rpb24ocil7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSByLnJlbnRlckZyb20ucHJvZHVjdDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvZHVjdCA9IG1ha2VQcm9kdWN0KHApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmYgPSByLnJlbnRlckZyb207XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlbnRlckZyb20gPSBtYWtlUmVudGVyRnJvbShyZiwgcHJvZHVjdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBydCA9IHIucmVudGVyVG87XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlbnRlclRvID0gbWFrZVJlbnRlclRvKHJ0KTtcclxuICAgICAgICAgICAgICAgICAgICByZW50aW5ncy5wdXNoKG1ha2VSZW50aW5nKHIsIHJlbnRlckZyb20sIHJlbnRlclRvKSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZW50aW5ncztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyp2YXIgYnlQcm9kdWN0ID0gZnVuY3Rpb24oaWQpe1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gICAnL2FwaS9yZW50aW5nL2dldEFsbFJlbnRpbmdzUHJvZHVjdC8nICsgaWQ7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBpZihyZXNwb25zZS5kYXRhLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZXJyb3JcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcmVudGluZ3MgPSBbXTtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChyZXNwb25zZS5kYXRhLCBmdW5jdGlvbihyKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVudGluZyA9IG5ldyBSZW50aW5nKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByLnJlbnRlckZyb20sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHIucmVudGVyVG8sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHIucHJvZHVjdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgci5kYXlzVG9SZW50XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVudGluZ3MucHVzaChyZW50aW5nKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlbnRpbmdzO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9OyovXHJcblxyXG4gICAgICAgIHZhciBhZGQgPSBmdW5jdGlvbihyZW50aW5nKXtcclxuICAgICAgICAgICAgdmFyIHVybCA9ICAnL2FwaS9yZW50aW5nL25ld1JlbnRpbmcvJztcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QodXJsLCByZW50aW5nKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7IC8vRXhwb3NlIHRoZSB1c2VyIGRhdGEgdG8geW91ciBhbmd1bGFyIHNjb3BlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBlZGl0ID0gZnVuY3Rpb24ocmVudGluZyl7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSAgJy9hcGkvcmVudGluZy9lZGl0UmVudGluZy8nO1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCh1cmwsIHJlbnRpbmcpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTsgLy9FeHBvc2UgdGhlIHVzZXIgZGF0YSB0byB5b3VyIGFuZ3VsYXIgc2NvcGVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIHJlbW92ZSA9IGZ1bmN0aW9uKGlkKXtcclxuICAgICAgICAgICAgdmFyIHVybCA9ICAgJy9hcGkvcmVudGluZy9yZW1vdmVCeUlkLycraWQ7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQodXJsKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7IC8vRXhwb3NlIHRoZSB1c2VyIGRhdGEgdG8geW91ciBhbmd1bGFyIHNjb3BlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBieUlkIDogYnlJZCxcclxuICAgICAgICAgICAgYnlSZW50ZXJGcm9tIDogYnlSZW50ZXJGcm9tLFxyXG4gICAgICAgICAgICBieVJlbnRlclRvIDogYnlSZW50ZXJUbyxcclxuICAgICAgICAgICAgYWRkIDogYWRkLFxyXG4gICAgICAgICAgICBlZGl0OiBlZGl0LFxyXG4gICAgICAgICAgICByZW1vdmUgOiByZW1vdmVcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIGFuZ3VsYXIubW9kdWxlKFwic3dvcHByXCIpLmZhY3RvcnkoXCJSZW50aW5nU2VydmljZVwiLCBbXCIkaHR0cFwiLCBSZW50aW5nU2VydmljZV0pO1xyXG59KSgpO1xyXG5cclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgR3JlZyBvbiAyNC1Ob3YtMTUuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uKCl7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICB2YXIgVXNlclNlcnZpY2UgPSBmdW5jdGlvbigkaHR0cCl7XHJcbiAgICAgICAgdmFyIGxvZ2luID0gZnVuY3Rpb24oY3JlZGVudGlhbHMpIHtcclxuICAgICAgICAgICAgdmFyIHVybCA9ICcvcGFydGlhbHMvbG9naW4nO1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCh1cmwsIGNyZWRlbnRpYWxzKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgcmVnaXN0ZXIgPSBmdW5jdGlvbih1c2VyRGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gJy9wYXJ0aWFscy9yZWdpc3Rlcic7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KHVybCwgdXNlckRhdGEpXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBsb2dvdXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHVybCA9ICcvcGFydGlhbHMvbG9nb3V0JztcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QodXJsKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgdXNlckRhdGEgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHVybCA9ICcvYXBpL3VzZXIvdXNlckRhdGFOYXZiYXIvJyArIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybClcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJlcnJvclwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb2R1Y3RzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHUgPSByZXNwb25zZS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh1LnByb2R1Y3RzLCBmdW5jdGlvbihwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwLmlzRGVsZXRlZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IFByb2R1Y3QoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5faWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5wcm9kdWN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludChwLnByaWNlUGVyRGF5KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAudXJsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAucHVibGljaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5wbGFjZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLmxvbmdpdHVkZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLmxhdGl0dWRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAuaXNEZWxldGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdHMucHVzaChwcm9kdWN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFVzZXJXaXRoQ3JlZGVudGlhbHMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHUuX2lkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1LmZpcnN0bmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdS5zdXJuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1LmxvY2FsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1Lmdvb2dsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdHNcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGJ5SWQgPSBmdW5jdGlvbihpZCl7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSAnL2FwaS91c2VyL2dldEJ5SWQvJytpZDtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCh1cmwpXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZXJyb3JcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1ID0gcmVzcG9uc2UuZGF0YS5vaztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFVzZXJXaXRoQ3JlZGVudGlhbHMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHUuZmlyc3RuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1LnN1cm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHUubG9jYWwuZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHUucHJvZHVjdHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHUuY3JlYXRlZE9uXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBBbGxXaXRoUHJvZHVjdHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHVybCA9ICcvYXBpL3VzZXIvZ2V0QWxsVXNlcnNXaXRoUHJvZHVjdHMnO1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybClcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJlcnJvclwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXJzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHJlc3BvbnNlLmRhdGEsIGZ1bmN0aW9uKHUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXNlciA9IG5ldyBVc2VyV2l0aENyZWRlbnRpYWxzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdS5maXJzdG5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1LnN1cm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1LmxvY2FsLmVtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdS5wcm9kdWN0cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUuY3JlYXRlZE9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJzLnB1c2godXNlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJzO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGFsbCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSAgICcvYXBpL3VzZXIvZ2V0QWxsLyc7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQodXJsKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXNwb25zZS5kYXRhLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImVycm9yIGdldHRpbmcgYWxsIHVzZXJzXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXNlcnMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gocmVzcG9uc2UuZGF0YS5vaywgZnVuY3Rpb24odSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXNlciA9IG5ldyBVc2VyV2l0aENyZWRlbnRpYWxzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdS5maXJzdG5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1LnN1cm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1LmxvY2FsLmVtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdS5wcm9kdWN0cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUuY3JlYXRlZE9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJzLnB1c2godXNlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJzO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGFkZCA9IGZ1bmN0aW9uKHVzZXIpe1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gICcvYXBpL3VzZXIvbmV3VXNlci8nO1xyXG4gICAgICAgICAgICAkaHR0cC5wb3N0KHVybCwgdXNlcilcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlOyAvL0V4cG9zZSB0aGUgdXNlciBkYXRhIHRvIHlvdXIgYW5ndWxhciBzY29wZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGxvZ2luOiBsb2dpbixcclxuICAgICAgICAgICAgcmVnaXN0ZXI6IHJlZ2lzdGVyLFxyXG4gICAgICAgICAgICBsb2dvdXQ6IGxvZ291dCxcclxuICAgICAgICAgICAgdXNlckRhdGE6IHVzZXJEYXRhLFxyXG4gICAgICAgICAgICBieUlkIDogYnlJZCxcclxuICAgICAgICAgICAgQWxsV2l0aFByb2R1Y3RzIDogQWxsV2l0aFByb2R1Y3RzLFxyXG4gICAgICAgICAgICBhZGQgOiBhZGQsXHJcbiAgICAgICAgICAgIGFsbCA6IGFsbFxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgYW5ndWxhci5tb2R1bGUoXCJzd29wcHJcIikuZmFjdG9yeShcIlVzZXJTZXJ2aWNlXCIsIFtcIiRodHRwXCIsIFVzZXJTZXJ2aWNlXSk7XHJcbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
